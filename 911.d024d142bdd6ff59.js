"use strict";(self.webpackChunkdms=self.webpackChunkdms||[]).push([[911],{911:(ft,T,o)=>{o.r(T),o.d(T,{BranchesModule:()=>p});var m=o(6895),l=o(2545),v=(()=>{return(n=v||(v={}))[n.id=0]="id",n.name="o_name",n.address="o_author",n.dl_type="o_dl_type",n.district_id="o_district_id",n.district_name="o_district_name",n.createdAt="o_created_at",n.updatedAt="o_updated_at",v;var n})(),x=o(727),U=o(1086);const I=n=>n.branchState;var N=o(6657),t=o(1571),L=o(1831),A=o(529),F=o(2340);class d{constructor(r){this.httpClient=r,this.apiUrl=F.N.apiUrl}getBranchDetails(r){return this.httpClient.get(`${this.apiUrl}/v1/branches/${r}`)}getBranch(r){let e=new A.LE;return e=e.append("page",r),this.httpClient.get(`${this.apiUrl}/v1/branches`,{params:e})}addBranch(r){return this.httpClient.post(`${this.apiUrl}/v1/branches`,r)}updateBranch(r,e){return this.httpClient.put(`${this.apiUrl}/v1/branches/${e}`,r)}getDistrictNames(){return this.httpClient.get(`${this.apiUrl}/v1/districts/ids_and_names`)}deleteUser(r){return this.httpClient.delete(`${this.apiUrl}/v1/branches/${r}`)}}d.\u0275fac=function(r){return new(r||d)(t.LFG(A.eN))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"});var C=o(7185),J=o(9886),B=o(1334),w=o(3556),q=o(3224);function Y(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr",13)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"div",14)(11,"div",15),t.NdJ("click",function(){const c=t.CHM(e).$implicit,h=t.oxw(2);return t.KtG(h.onEdit(c.id))}),t.O4$(),t._UZ(12,"svg",16),t.qZA(),t.kcU(),t.TgZ(13,"div",17),t.NdJ("click",function(){const c=t.CHM(e).$implicit,h=t.oxw(2);return t.KtG(h.onDelete(c))}),t.O4$(),t._UZ(14,"svg",18),t.qZA()()()()}if(2&n){const e=r.$implicit,s=r.index,a=t.oxw(2);t.xp6(2),t.Oqu(a.serialNo+s),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.dl_type),t.xp6(2),t.Oqu(e.district_name)}}function O(n,r){if(1&n&&(t.TgZ(0,"div",7)(1,"table",8)(2,"thead",9)(3,"tr")(4,"th",10),t._uU(5," S.No "),t._UZ(6,"i",11),t.qZA(),t.TgZ(7,"th",10),t._uU(8," Name "),t._UZ(9,"i",11),t.qZA(),t.TgZ(10,"th",10),t._uU(11," DL Type "),t._UZ(12,"i",11),t.qZA(),t.TgZ(13,"th",10),t._uU(14," District Name "),t._UZ(15,"i",11),t.qZA(),t.TgZ(16,"th",10),t._uU(17," Actions "),t._UZ(18,"i",11),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,Y,15,4,"tr",12),t.qZA()()()),2&n){const e=t.oxw();t.xp6(20),t.Q6J("ngForOf",e.branches)}}function Q(n,r){1&n&&t._UZ(0,"div",19)}function S(n,r){1&n&&(t.TgZ(0,"h5",20),t._uU(1," No list found "),t.qZA())}function E(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"app-pagination",22),t.NdJ("pageChange",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.onPageChange(a))}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("pagination",e.pagination)}}class g{constructor(r,e,s,a,c){this.router=r,this.store=e,this.branchService=s,this.toasterService=a,this.modalService=c,this.branchListSortColumns=v,this.subscriptions=new x.w0,this.isLoading=!1;const h=this.store.select(I).subscribe(gt=>{this.pagination=gt.pagination});this.subscriptions.add(h)}ngOnInit(){this.loadBranches(this.pagination.current_page)}ngOnDestroy(){this.subscriptions.unsubscribe()}loadBranches(r){this.isLoading=!0;const e=this.branchService.getBranch(r).subscribe(s=>{this.isLoading=!1,this.branches=s.branches,this.store.dispatch((0,N.p)({pagination:s.pagination})),this.serialNo=this.pagination.start_at},s=>{this.isLoading=!1,this.toasterService.error(s.errors[0])});this.subscriptions.add(e)}onEdit(r){this.router.navigate(["/branches/edit",r])}onDelete(r){this.modalService.show(U.v,{initialState:{text:`Do you really want to remove branch ${r.name}`}}).content?.confirm.subscribe({next:()=>{const a=this.branchService.deleteUser(r.id).subscribe({next:()=>{this.onPageChange(1),this.toasterService.success("Branch deleted successfully")},error:()=>{this.toasterService.error("Oops! Something went wrong")}});this.subscriptions.add(a)}})}onPageChange(r){this.loadBranches(r)}}g.\u0275fac=function(r){return new(r||g)(t.Y36(l.F0),t.Y36(L.yh),t.Y36(d),t.Y36(C._W),t.Y36(J.tT))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-branches-list"]],decls:10,vars:4,consts:[[1,"d-flex","justify-content-between","mb-4"],["cButton","","variant","outline","color","info","routerLink","/branches/add","title","Click to Add branch"],["class","table-responsive",4,"ngIf"],[1,"d-flex","justify-content-center","mt-5"],["class","spinner-border","role","status",4,"ngIf"],["class","text-center mt-5",4,"ngIf"],["class","d-flex justify-content-around",4,"ngIf"],[1,"table-responsive"],[1,"table","table-hover"],[1,"bg-secondary"],["scope","col",1,"curser-pointer"],[1,"text-info","bi"],["class","bg-white",4,"ngFor","ngForOf"],[1,"bg-white"],[1,"d-flex","gap-3"],["title","Edit",1,"bg-edit","opacity-75","rounded-circle","px-2","py-1","text-white","fw-bolder","curser-pointer",3,"click"],["cIcon","","name","cilPencil","size","md"],["title","Delete",1,"bg-delete","opacity-75","rounded-circle","px-2","py-1","text-white","fw-bolder","curser-pointer",3,"click"],["cIcon","","name","cilTrash","size","md"],["role","status",1,"spinner-border"],[1,"text-center","mt-5"],[1,"d-flex","justify-content-around"],[1,"mx-auto","my-3",3,"pagination","pageChange"]],template:function(r,e){1&r&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2,"Branches"),t.qZA(),t.TgZ(3,"button",1),t._uU(4," Add Branch "),t.qZA()(),t.YNc(5,O,21,1,"div",2),t.TgZ(6,"div",3),t.YNc(7,Q,1,0,"div",4),t.YNc(8,S,2,0,"h5",5),t.qZA(),t.YNc(9,E,2,1,"div",6)),2&r&&(t.xp6(5),t.Q6J("ngIf",!e.isLoading&&(null==e.branches?null:e.branches.length)),t.xp6(2),t.Q6J("ngIf",e.isLoading),t.xp6(1),t.Q6J("ngIf",!(e.isLoading||null!=e.branches&&e.branches.length)),t.xp6(1),t.Q6J("ngIf",null==e.branches?null:e.branches.length))},dependencies:[m.sg,m.O5,l.rH,B.ar,w.Q,q.Hq3],styles:[".search[_ngcontent-%COMP%]{border-right:0px}.search-button[_ngcontent-%COMP%]{min-width:112px}.input-search[_ngcontent-%COMP%]{max-width:847px}.select-search-type[_ngcontent-%COMP%]{min-width:120px}.btn-view[_ngcontent-%COMP%]{background:#89f3b3}.btn-view[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#078439}.bg-edit[_ngcontent-%COMP%]{background:#bcbaf7;transition:all .2s ease-in-out}.bg-edit[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#230b34}.bg-edit[_ngcontent-%COMP%]:hover{background-color:#1e7bc6;cursor:pointer}.bg-edit[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{color:#fff}.bg-delete[_ngcontent-%COMP%]{background:#f795a0;transition:all .2s ease-in-out}.bg-delete[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#830000}.bg-delete[_ngcontent-%COMP%]:hover{background-color:red;cursor:pointer}.bg-delete[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{color:#fff}.bg-delete[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#000;transition:all .2s ease-in-out}"]});var i=o(433),b=o(8613),y=o(7665),Z=o(6119);function k(n,r){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e," ")}}function M(n,r){if(1&n&&(t.TgZ(0,"div",27)(1,"p"),t._uU(2,"Please fix the following"),t.qZA(),t.TgZ(3,"ul"),t.YNc(4,k,2,1,"li",28),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.validationErrors)}}function D(n,r){1&n&&(t.TgZ(0,"small",16),t._uU(1,"name is required"),t.qZA())}function P(n,r){if(1&n&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("Minimum length required is ",null==e.formControls.name.errors?null:e.formControls.name.errors.minlength.requiredLength,"")}}function j(n,r){if(1&n&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("Maximum length is ",null==e.formControls.name.errors?null:e.formControls.name.errors.maxlength.requiredLength,"")}}function $(n,r){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,D,2,0,"small",29),t.YNc(2,P,2,1,"small",29),t.YNc(3,j,2,1,"small",29),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.formControls.name.errors?null:e.formControls.name.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.formControls.name.errors?null:e.formControls.name.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==e.formControls.name.errors?null:e.formControls.name.errors.maxlength)}}function z(n,r){1&n&&(t.TgZ(0,"small",16),t._uU(1,"address is required"),t.qZA())}function G(n,r){if(1&n&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("Minimum length required is ",null==e.formControls.address.errors?null:e.formControls.address.errors.minlength.requiredLength,"")}}function H(n,r){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,z,2,0,"small",29),t.YNc(2,G,2,1,"small",29),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==e.formControls.address.errors?null:e.formControls.address.errors.required)||(null==e.formControls.address.errors?null:e.formControls.address.errors.pattern)),t.xp6(1),t.Q6J("ngIf",null==e.formControls.address.errors?null:e.formControls.address.errors.minlength)}}function V(n,r){1&n&&(t.TgZ(0,"small",16),t._uU(1,"DLtype is required"),t.qZA())}function X(n,r){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,V,2,0,"small",29),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==e.formControls.dl_type.errors?null:e.formControls.dl_type.errors.required)||(null==e.formControls.dl_type.errors?null:e.formControls.dl_type.errors.pattern))}}function K(n,r){1&n&&(t.TgZ(0,"small",16),t._uU(1,"District name is required"),t.qZA())}function W(n,r){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,K,2,0,"small",29),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.formControls.district_id.errors?null:e.formControls.district_id.errors.required)}}class f{constructor(r,e,s,a){this.formBuilder=r,this.router=e,this.toasterService=s,this.branchService=a,this.branchesList=[],this.subscriptions=new x.w0}ngOnInit(){this.initializeForm(),this.getDistrictNames()}ngOnDestroy(){this.subscriptions.unsubscribe()}initializeForm(){this.addBranchForm=this.formBuilder.group({name:[null,[i.kI.required,i.kI.minLength(1),i.kI.maxLength(100)]],address:[null,[i.kI.required,i.kI.minLength(1),i.kI.maxLength(200),i.kI.pattern(b.v.whiteSpace)]],dl_type:[null,[i.kI.required,i.kI.minLength(1),i.kI.maxLength(30),i.kI.pattern(b.v.whiteSpace)]],district_id:[null,[i.kI.required]]})}get formControls(){return this.addBranchForm.controls}getDistrictNames(){const r=this.branchService.getDistrictNames().subscribe(e=>{this.branchesList=e},e=>{this.toasterService.error(e.errors[0])});this.subscriptions.add(r)}onFormSubmit(){if(this.addBranchForm.valid){this.isLoading=!0;const r={name:this.addBranchForm.value.name,address:this.addBranchForm.value.address.trim(),dl_type:this.addBranchForm.value.dl_type.trim(),district_id:this.addBranchForm.value.district_id},e=this.branchService.addBranch(r).subscribe(()=>{this.toasterService.success("Branch added successfully"),this.router.navigate(["/branches"])},s=>{this.toasterService.error(s.errors[0]),this.isLoading=!1});this.subscriptions.add(e)}}}f.\u0275fac=function(r){return new(r||f)(t.Y36(i.qu),t.Y36(l.F0),t.Y36(C._W),t.Y36(d))},f.\u0275cmp=t.Xpm({type:f,selectors:[["ng-component"]],decls:46,vars:16,consts:[[1,"d-flex","justify-content-center"],["autocomplete","off",1,"mt-3",3,"formGroup","submit"],[1,"card"],[1,"card-header"],[1,"d-flex","justify-content-between","align-items-center"],["type","button","title","Back","routerLink","/branches",1,"btn","btn-primary","d-flex","align-items-center",3,"disabled"],[1,"min-width-18px"],["aria-hidden","true",1,"fa","fa-chevron-left"],[1,"text","ml-1","ml-sm-o","d-none","d-sm-block"],[1,"text-center","m-0"],[3,"disabled","buttonText","title","isLoading","loadingText","buttonIconClass"],[1,"card-body"],["class","alert alert-warning",4,"ngIf"],[1,"row"],[1,"form-group","col-12","col-md-6"],["for","name"],[1,"text-danger"],["type","text","id","name","formControlName","name","maxlength","100","placeholder","Enter Name","onkeypress","return /[a-zA-Z]/i.test(event.key)",1,"form-control"],[4,"ngIf"],[1,"form-group","col-12","col-md-6","mt-2","mt-md-0"],["for","address"],["type","text","id","address","formControlName","address","maxlength","200","placeholder","Enter address",1,"form-control"],[1,"form-group","col-12","col-md-6","mt-md-4","mt-2"],["for","dl_type"],["type","text","id","dl_type","placeholder","Enter DLtype","formControlName","dl_type",1,"form-control"],["for","district_id"],["bindValue","id","bindLabel","name","placeholder","Select District","formControlName","district_id","notFoundText","No branches found",3,"items","clearable","searchable"],[1,"alert","alert-warning"],[4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"]],template:function(r,e){1&r&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("submit",function(){return e.onFormSubmit()}),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"button",5)(7,"span",6),t._UZ(8,"i",7),t.qZA(),t.TgZ(9,"span",8),t._uU(10,"Back"),t.qZA()()(),t.TgZ(11,"h2",9),t._uU(12,"Add Branch"),t.qZA(),t.TgZ(13,"div"),t._UZ(14,"app-loading-button",10),t.qZA()()(),t.TgZ(15,"div",11),t.YNc(16,M,5,1,"div",12),t.TgZ(17,"div",13)(18,"div",14)(19,"label",15),t._uU(20," Name "),t.TgZ(21,"span",16),t._uU(22,"*"),t.qZA()(),t._UZ(23,"input",17),t.YNc(24,$,4,3,"div",18),t.qZA(),t.TgZ(25,"div",19)(26,"label",20),t._uU(27," Address "),t.TgZ(28,"span",16),t._uU(29,"*"),t.qZA()(),t._UZ(30,"input",21),t.YNc(31,H,3,2,"div",18),t.qZA(),t.TgZ(32,"div",22)(33,"label",23),t._uU(34,"DL type "),t.TgZ(35,"span",16),t._uU(36,"*"),t.qZA()(),t._UZ(37,"input",24),t.YNc(38,X,2,1,"div",18),t.qZA(),t.TgZ(39,"div",22)(40,"label",25),t._uU(41,"District Name"),t.TgZ(42,"span",16),t._uU(43,"*"),t.qZA()(),t._UZ(44,"ng-select",26),t.YNc(45,W,2,1,"div",18),t.qZA()()()()()()),2&r&&(t.xp6(1),t.Q6J("formGroup",e.addBranchForm),t.xp6(5),t.Q6J("disabled",e.isLoading),t.xp6(8),t.Q6J("disabled",e.addBranchForm.invalid)("buttonText","Add Branch")("title","Click to add branch")("isLoading",e.isLoading)("loadingText","Adding branch...")("buttonIconClass","fas fa-check"),t.xp6(2),t.Q6J("ngIf",e.hasValidationError),t.xp6(8),t.Q6J("ngIf",e.formControls.name.touched&&e.formControls.name.invalid),t.xp6(7),t.Q6J("ngIf",e.formControls.address.touched&&e.formControls.address.invalid),t.xp6(7),t.Q6J("ngIf",e.formControls.dl_type.touched&&e.formControls.dl_type.invalid),t.xp6(6),t.Q6J("items",e.branchesList)("clearable",!1)("searchable",!0),t.xp6(1),t.Q6J("ngIf",e.formControls.district_id.touched&&e.formControls.district_id.invalid))},dependencies:[m.sg,m.O5,l.rH,i._Y,i.Fj,i.JJ,i.JL,i.nD,i.sg,i.u,y.v,Z.w9],encapsulation:2});var R=o(9435);function tt(n,r){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e," ")}}function et(n,r){if(1&n&&(t.TgZ(0,"div",27)(1,"p"),t._uU(2,"Please fix the following"),t.qZA(),t.TgZ(3,"ul"),t.YNc(4,tt,2,1,"li",28),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.validationErrors)}}function nt(n,r){1&n&&(t.TgZ(0,"small",16),t._uU(1,"name is required"),t.qZA())}function rt(n,r){if(1&n&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("Minimum length required is ",null==e.formControls.name.errors?null:e.formControls.name.errors.minlength.requiredLength,"")}}function it(n,r){if(1&n&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("Maximum length is ",null==e.formControls.name.errors?null:e.formControls.name.errors.maxlength.requiredLength,"")}}function ot(n,r){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,nt,2,0,"small",29),t.YNc(2,rt,2,1,"small",29),t.YNc(3,it,2,1,"small",29),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.formControls.name.errors?null:e.formControls.name.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.formControls.name.errors?null:e.formControls.name.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==e.formControls.name.errors?null:e.formControls.name.errors.maxlength)}}function st(n,r){1&n&&(t.TgZ(0,"small",16),t._uU(1,"address is required"),t.qZA())}function at(n,r){if(1&n&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("Minimum length required is ",null==e.formControls.address.errors?null:e.formControls.address.errors.minlength.requiredLength,"")}}function lt(n,r){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,st,2,0,"small",29),t.YNc(2,at,2,1,"small",29),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==e.formControls.address.errors?null:e.formControls.address.errors.required)||(null==e.formControls.address.errors?null:e.formControls.address.errors.pattern)),t.xp6(1),t.Q6J("ngIf",null==e.formControls.address.errors?null:e.formControls.address.errors.minlength)}}function dt(n,r){1&n&&(t.TgZ(0,"small",16),t._uU(1,"DL type is required"),t.qZA())}function ct(n,r){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,dt,2,0,"small",29),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==e.formControls.dl_type.errors?null:e.formControls.dl_type.errors.required)||(null==e.formControls.dl_type.errors?null:e.formControls.dl_type.errors.pattern))}}function mt(n,r){1&n&&(t.TgZ(0,"small",16),t._uU(1,"DistrictId is required"),t.qZA())}function ht(n,r){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,mt,2,0,"small",29),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.formControls.district_id.errors?null:e.formControls.district_id.errors.required)}}class _{constructor(r,e,s,a,c,h){this.formBuilder=r,this.router=e,this.route=s,this.toasterService=a,this.branchService=c,this.formState=h,this.districtNamesList=[],this.subscriptions=new x.w0}ngOnInit(){this.initializeForm(),this.branchId=this.route.snapshot.params.id,this.getUserAndInitializeForm();const r=this.branchService.getDistrictNames().subscribe(e=>{this.districtNamesList=e});this.subscriptions.add(r)}ngOnDestroy(){this.subscriptions.unsubscribe()}initializeForm(){this.editBranchForm=this.formBuilder.group({name:[null,[i.kI.required,i.kI.minLength(1),i.kI.maxLength(100)]],address:[null,[i.kI.required,i.kI.minLength(1),i.kI.maxLength(200),i.kI.pattern(b.v.whiteSpace)]],dl_type:[null,[i.kI.required,i.kI.minLength(1),i.kI.maxLength(30),i.kI.pattern(b.v.whiteSpace)]],district_id:[null,[i.kI.required]]})}getUserAndInitializeForm(){const r=this.branchService.getBranchDetails(this.branchId).subscribe(e=>{this.editBranchForm.patchValue({name:e.name,address:e.address,dl_type:e.dl_type,district_id:e.district_id}),this.hasBranch=!0,this.initialLoading=!1,this.formState.isFormPristine(this.editBranchForm)},e=>{this.toasterService.error(e.errors[0]),this.hasBranch=!1,this.initialLoading=!1});this.subscriptions.add(r)}get formControls(){return this.editBranchForm.controls}onFormSubmit(){if(this.editBranchForm.valid){this.isLoading=!0;const r={name:this.editBranchForm.value.name,address:this.editBranchForm.value.address.trim(),dl_type:this.editBranchForm.value.dl_type.trim(),district_id:this.editBranchForm.value.district_id},e=this.branchService.updateBranch(r,this.branchId).subscribe(()=>{this.toasterService.success("Branch edited successfully"),this.router.navigate(["/branches"])},s=>{this.toasterService.error(s.errors[0]),this.isLoading=!1});this.subscriptions.add(e)}}}_.\u0275fac=function(r){return new(r||_)(t.Y36(i.qu),t.Y36(l.F0),t.Y36(l.gz),t.Y36(C._W),t.Y36(d),t.Y36(R.x))},_.\u0275cmp=t.Xpm({type:_,selectors:[["ng-component"]],decls:46,vars:16,consts:[[1,"d-flex","justify-content-center"],["autocomplete","off",1,"mt-3",3,"formGroup","submit"],[1,"card"],[1,"card-header"],[1,"d-flex","justify-content-between","align-items-center"],["type","button","title","Back","routerLink","/branches",1,"btn","btn-primary","d-flex","align-items-center",3,"disabled"],[1,"min-width-18px"],["aria-hidden","true",1,"fa","fa-chevron-left"],[1,"text","ml-1","ml-sm-o","d-none","d-sm-block"],[1,"text-center","m-0"],[3,"disabled","buttonText","title","isLoading","loadingText","buttonIconClass"],[1,"card-body"],["class","alert alert-warning",4,"ngIf"],[1,"row"],[1,"form-group","col-12","col-md-6"],["for","name"],[1,"text-danger"],["type","text","id","name","formControlName","name","maxlength","100","placeholder","Enter Name",1,"form-control"],[4,"ngIf"],[1,"form-group","col-12","col-md-6","mt-2","mt-md-0"],["for","address"],["type","text","id","address","formControlName","address","maxlength","200","placeholder","Enter address",1,"form-control"],[1,"form-group","col-12","col-md-6","mt-2","mt-md-4"],["for","dl_type"],["type","text","id","dl_type","placeholder","Enter DLtype","formControlName","dl_type",1,"form-control"],["for","district_id"],["bindValue","id","bindLabel","name","placeholder","Select District","formControlName","district_id","notFoundText","No branches found",3,"items","clearable","searchable"],[1,"alert","alert-warning"],[4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"]],template:function(r,e){1&r&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("submit",function(){return e.onFormSubmit()}),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"button",5)(7,"span",6),t._UZ(8,"i",7),t.qZA(),t.TgZ(9,"span",8),t._uU(10,"Back"),t.qZA()()(),t.TgZ(11,"h2",9),t._uU(12,"Edit Branch"),t.qZA(),t.TgZ(13,"div"),t._UZ(14,"app-loading-button",10),t.qZA()()(),t.TgZ(15,"div",11),t.YNc(16,et,5,1,"div",12),t.TgZ(17,"div",13)(18,"div",14)(19,"label",15),t._uU(20," Name "),t.TgZ(21,"span",16),t._uU(22,"*"),t.qZA()(),t._UZ(23,"input",17),t.YNc(24,ot,4,3,"div",18),t.qZA(),t.TgZ(25,"div",19)(26,"label",20),t._uU(27," Address "),t.TgZ(28,"span",16),t._uU(29,"*"),t.qZA()(),t._UZ(30,"input",21),t.YNc(31,lt,3,2,"div",18),t.qZA(),t.TgZ(32,"div",22)(33,"label",23),t._uU(34,"DL type "),t.TgZ(35,"span",16),t._uU(36,"*"),t.qZA()(),t._UZ(37,"input",24),t.YNc(38,ct,2,1,"div",18),t.qZA(),t.TgZ(39,"div",22)(40,"label",25),t._uU(41,"District Name"),t.TgZ(42,"span",16),t._uU(43,"*"),t.qZA()(),t._UZ(44,"ng-select",26),t.YNc(45,ht,2,1,"div",18),t.qZA()()()()()()),2&r&&(t.xp6(1),t.Q6J("formGroup",e.editBranchForm),t.xp6(5),t.Q6J("disabled",e.isLoading),t.xp6(8),t.Q6J("disabled",e.editBranchForm.invalid||e.editBranchForm.pristine)("buttonText","Edit Branch")("title","Click to edit branch")("isLoading",e.isLoading)("loadingText","Adding branch..")("buttonIconClass","fas fa-check"),t.xp6(2),t.Q6J("ngIf",e.hasValidationError),t.xp6(8),t.Q6J("ngIf",e.formControls.name.touched&&e.formControls.name.invalid),t.xp6(7),t.Q6J("ngIf",e.formControls.address.touched&&e.formControls.address.invalid),t.xp6(7),t.Q6J("ngIf",e.formControls.dl_type.touched&&e.formControls.dl_type.invalid),t.xp6(6),t.Q6J("items",e.districtNamesList)("clearable",!1)("searchable",!0),t.xp6(1),t.Q6J("ngIf",e.formControls.district_id.touched&&e.formControls.district_id.invalid))},dependencies:[m.sg,m.O5,l.rH,i._Y,i.Fj,i.JJ,i.JL,i.nD,i.sg,i.u,y.v,Z.w9],encapsulation:2});const ut=[{path:"branches",component:g},{path:"branches/add",component:f},{path:"branches/edit/:id",component:_}];class u{}u.\u0275fac=function(r){return new(r||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[l.Bz.forChild(ut),l.Bz]});var pt=o(4466);class p{}p.\u0275fac=function(r){return new(r||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({providers:[d],imports:[m.ez,u,B.QX,pt.m,q.hJ1,i.u5,i.UX,Z.A0]})}}]);