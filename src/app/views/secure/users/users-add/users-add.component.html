<div class="d-flex justify-content-center">
  <form
    [formGroup]="addUserForm"
    (submit)="onFormSubmit()"
    class="mt-3"
    autocomplete="off"
  >
    <div class="card">
      <div class="card-header">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <button
              class="btn btn-primary d-flex align-items-center"
              type="button"
              title="Back"
              [disabled]="isLoading"
              routerLink="../"
            >
              <span class="min-width-18px">
                <i class="fa fa-chevron-left" aria-hidden="true"></i>
              </span>
              <span class="text ml-1 ml-sm-o d-none d-sm-block">Back</span>
            </button>
          </div>

          <h2 class="text-center m-0">Add User</h2>

          <div>
            <app-loading-button
              [disabled]="addUserForm.invalid"
              [buttonText]="'Add User'"
              [title]="'Click to add User'"
              [isLoading]="isLoading"
              [loadingText]="'Adding User...'"
              [buttonIconClass]="'fas fa-check'"
            ></app-loading-button>
          </div>
        </div>
      </div>
      <div class="card-body">
        <div class="alert alert-warning" *ngIf="hasValidationError">
          <p>Please fix the following</p>
          <ul>
            <li *ngFor="let validationError of validationErrors">
              {{ validationError }}
            </li>
          </ul>
        </div>
        <div class="row">
          <div class="form-group col-12 col-md-6">
            <label for="firstName">
              First Name <span class="text-danger">*</span></label
            >
            <input
              type="text"
              id="firstName"
              formControlName="firstName"
              class="form-control"
              maxlength="100"
              placeholder="Enter First Name"
              onkeypress="return /[a-zA-Z]/i.test(event.key)"
            />
            <div
              *ngIf="
                formControls['firstName'].touched &&
                formControls['firstName'].invalid
              "
            >
              <small
                class="text-danger"
                *ngIf="formControls['firstName'].errors?.['required']"
                >First name is required</small
              >
              <small
                class="text-danger"
                *ngIf="formControls['firstName'].errors?.['minlength']"
                >Minimum length required is
                {{
                  formControls['firstName'].errors?.['minlength'].requiredLength
                }}</small
              >
              <small
                class="text-danger"
                *ngIf="formControls['firstName'].errors?.['maxlength']"
                >Maximum length is
                {{
                  formControls['firstName'].errors?.['maxlength'].requiredLength
                }}</small
              >
            </div>
          </div>
          <div class="form-group col-12 col-md-6 mt-2 mt-md-0">
            <label for="lastName">
              Last Name <span class="text-danger">*</span></label
            >
            <input
              type="text"
              id="lastName"
              formControlName="lastName"
              class="form-control"
              maxlength="100"
              placeholder="Enter Last Name"
              onkeypress="return /[a-zA-Z]/i.test(event.key)"
            />
            <div
              *ngIf="
                formControls['lastName'].touched &&
                formControls['lastName'].invalid
              "
            >
              <small
                class="text-danger"
                *ngIf="formControls['lastName'].errors?.['required']"
                >Last name is required</small
              >
              <small
                class="text-danger"
                *ngIf="formControls['lastName'].errors?.['minlength']"
                >Minimum length required is
                {{ formControls['lastName'].errors?.['minlength'].requiredLength }}</small
              >
              <small
                class="text-danger"
                *ngIf="formControls['lastName'].errors?.['maxlength']"
                >Maximum length is
                {{ formControls['lastName'].errors?.['maxlength'].requiredLength }}</small
              >
            </div>
          </div>
          <div class="form-group col-12 col-md-6 mt-2 mt-md-4">
            <label for="email"
              >Email Address <span class="text-danger">*</span></label
            >
            <input
              type="email"
              class="form-control"
              id="email"
              placeholder="Enter Email"
              formControlName="email"
            />
            <div
              *ngIf="
                formControls['email'].touched && formControls['email'].invalid
              "
            >
              <small
                class="text-danger"
                *ngIf="formControls['email'].errors?.['required']"
                >Email is required</small
              >
              <small
                class="text-danger"
                *ngIf="formControls['email'].errors?.['pattern']"
                >Enter a valid email</small
              >
            </div>
          </div>
          <div class="form-group col-12 col-md-6 mt-2 mt-md-4">
            <label for="branch"
              >Branch Name<span class="text-danger">*</span></label
            >
            <ng-select
              [items]="branchesList"
              [clearable]="false"
              [searchable]="true"
              bindValue="id"
              bindLabel="name"
              placeholder="Select Branch"
              formControlName="branch"
              notFoundText="No branches found"
            >
            </ng-select>
            <div
              *ngIf="
                formControls['branch'].touched && formControls['branch'].invalid
              "
            >
              <small
                class="text-danger"
                *ngIf="formControls['branch'].errors?.['required']"
                >Branch name is required</small
              >
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
