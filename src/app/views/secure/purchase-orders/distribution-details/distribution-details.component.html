<button
  cButton
  variant="outline"
  color="info"
  (click)="onBackToMaterialDistributionsView()"
  title="Click to go back"
>
  <span class="min-width-18px">
    <i class="fa fa-chevron-left" aria-hidden="true"></i>
  </span>
  Back
</button>
<div class="d-flex justify-content-center mt-5" *ngIf="isLoading">
  <div class="spinner-border" role="status"></div>
  <h5
    class="text-center mt-5"
    *ngIf="!isLoading && !materialDistributionDetails.material_delivery.id"
  >
    No Details found
  </h5>
</div>

<div *ngIf="materialDistributionDetails?.material_delivery?.id && !isLoading">
  <h3 class="mb-3 mt-4">Material Delivery Details</h3>

  <div
    class="mb-3 gap-3 row d-flex align-items-center"
    *ngIf="!isLoading && materialDistributionDetails"
  >
    <div class="col-12 col-sm-8 col-md-6 col-lg-5">
      <h6>
        Delivery Status:<span class="text-primary">
          {{
            materialDistributionDetails.material_delivery.delivery_status
          }}</span
        >
      </h6>
    </div>
    <div class="col-12 col-sm-8 col-md-6 col-lg-5">
      <h6>
        Delivery Voucher Date:<span class="text-primary">
          {{
            materialDistributionDetails.material_delivery.dv_date
              | date : "dd/MM/yyyy"
          }}</span
        >
      </h6>
    </div>
    <div class="col-12 col-sm-8 col-md-6 col-lg-5">
      <h6>
        Delivered Date:<span class="text-primary">
          {{
            materialDistributionDetails.book_receipt_voucher.delivery_date
              | date : "short"
          }}</span
        >
      </h6>
    </div>
    <div class="col-12 col-sm-8 col-md-6 col-lg-5">
      <h6>
        Delivery Voucher Quantity:<span class="text-primary">
          {{ materialDistributionDetails.material_delivery.dv_qty }}</span
        >
      </h6>
    </div>
    <div class="col-12 col-sm-8 col-md-6 col-lg-5">
      <h6>
        Received Quantity:
        <span class="text-primary">{{
          materialDistributionDetails.material_delivery.received_copies
        }}</span>
      </h6>
    </div>

    <div class="col-12 col-sm-8 col-md-6 col-lg-5">
      <h6>
        Delivery Voucher Shortage Quantity:<span class="text-primary">
          {{
            materialDistributionDetails.material_delivery.dv_shortage_copies
              ? materialDistributionDetails.material_delivery.dv_shortage_copies
              : "-"
          }}</span
        >
      </h6>
    </div>

    <div class="col-12 col-sm-8 col-md-6 col-lg-5">
      <h6>
        Balance Quantity:
        <span class="text-primary">{{
          materialDistributionDetails.material_delivery.balanced_copies
        }}</span>
      </h6>
    </div>
    <div class="col-12 col-sm-8 col-md-6 col-lg-5">
      <h6>
        Defectives Count:
        <span class="text-primary">{{
          materialDistributionDetails.material_delivery.defectives_count
        }}</span>
      </h6>
    </div>
    <div class="col-12 col-sm-8 col-md-6 col-lg-5 d-flex gap-1">
      <h6>Quantity / Bundle:</h6>
      <h6 class="text-primary w-auto">
        {{ materialDistributionDetails.material_delivery.copies_per_bundle }}
      </h6>
    </div>
    <div class="col-12 col-sm-8 col-md-6 col-lg-5">
      <h6>
        Defectives Reason:<span class="text-primary">
          {{
            materialDistributionDetails.material_delivery.defective_reason
              ? materialDistributionDetails.material_delivery.defective_reason
              : "-"
          }}</span
        >
      </h6>
    </div>

    <div class="col-12 col-sm-8 col-md-6 col-lg-5">
      <h6>
        No.of Bundles:
        <span class="text-primary">{{
          materialDistributionDetails.material_delivery.received_bundles
        }}</span>
      </h6>
    </div>

    <div class="col-12 col-sm-8 col-md-6 col-lg-5">
      <h6>
        Weights:<span class="text-primary">
          {{
            materialDistributionDetails.material_delivery.weights
              ? materialDistributionDetails.material_delivery.weights
              : "-"
          }}</span
        >
      </h6>
    </div>
    <div class="col-12 col-sm-8 col-md-6 col-lg-5">
      <h6>
        Quantity as bundle:
        <span class="text-primary col-3">{{
          materialDistributionDetails.material_delivery.qty_as_bundles
        }}</span>
      </h6>
    </div>
    <div class="col-12 col-sm-8 col-md-6 col-lg-5">
      <h6>
        Remarks:<span class="text-primary">
          {{
            materialDistributionDetails.material_delivery.remarks
              ? materialDistributionDetails.material_delivery.remarks
              : "-"
          }}</span
        >
      </h6>
    </div>
    <div class="col-12 col-sm-8 col-md-6 col-lg-5">
      <h6>
        Loose Copies:<span class="text-primary">
          {{
            materialDistributionDetails.material_delivery.received_loose_copies
          }}</span
        >
      </h6>
    </div>
  </div>
  <hr />
  <h3 class="mb-3 mt-5">Voucher Image</h3>
  <div
    class="voucher-img-cont"
    *ngIf="materialDistributionDetails.material_delivery.voucher_image_url"
  >
    <img
      [src]="materialDistributionDetails.material_delivery.voucher_image_url"
      alt="voucher-image"
      class="voucher-image"
      (click)="openModal(template)"
    />
  </div>
  <ng-template #template>
    <div
      class="voucher-img-cont text-center"
      *ngIf="materialDistributionDetails.material_delivery.voucher_image_url"
    >
      <img
        [src]="materialDistributionDetails.material_delivery.voucher_image_url"
        alt="voucher-image"
        class="voucher-image-model"
      />
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-primary" (click)="modalRef.hide()">
        Close
      </button>
    </div>
  </ng-template>
  <h5
    class="text-center mb-5"
    *ngIf="!materialDistributionDetails.material_delivery.voucher_image_url"
  >
    No images Found
  </h5>
  <hr class="mt-5" />
  <h3 class="mb-3 mt-3">Material Images</h3>
  <div class="d-flex justify-content-between">
    <div
      *ngFor="
        let imageUrl of materialDistributionDetails.material_delivery
          .material_image_url
      "
    >
      <img
        [src]="imageUrl"
        alt="material-image"
        class="voucher-image"
        (click)="openModal(materialImage)"
        *ngIf="materialDistributionDetails.material_delivery.material_image_url"
      />
      <ng-template #materialImage>
        <div class="text-center">
          <img
            [src]="imageUrl"
            alt="material-image"
            class="voucher-image-model"
          />
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-primary"
            (click)="modalRef.hide()"
          >
            Close
          </button>
        </div>
      </ng-template>
    </div>
  </div>
  <h5
    class="text-center mb-5"
    *ngIf="
      !materialDistributionDetails.material_delivery.material_image_url
        .length ||
      !materialDistributionDetails.material_delivery.material_image_url
    "
  >
    No images Found
  </h5>
</div>
