"use strict";(self.webpackChunkdms=self.webpackChunkdms||[]).push([[763],{2763:(gt,x,a)=>{a.r(x),a.d(x,{PurchaseOrdersModule:()=>h});var u=a(6895),c=a(2545);const D=r=>r.poState;var f=a(2977),O=a(7579),T=a(727),y=a(8372),C=a(1884),t=a(1571),q=a(529),w=a(5698),P=a(2340),U=a(1831);class d{constructor(e,i){this.http=e,this.store=i,this.apiUrl=P.N.apiUrl}getAllPO(){let e=new q.LE;return this.store.pipe((0,U.Ys)(D),(0,w.q)(1)).subscribe(i=>{e=e.appendAll({page:i.pagination.current_page.toString(),q:i.searchTerm?i.searchTerm:""}),"All"!==i.poStatus&&(e=e.append("status",i.poStatus))}),this.http.get(`${this.apiUrl}/v1/admins/purchase_orders`,{params:e})}getPODetials(e){return this.http.get(`${this.apiUrl}/v1/admins/purchase_orders/${e}`)}downloadPoDetails(){return this.http.get(`${this.apiUrl}/v1/purchase_orders/downloads`)}getMaterialDistributionList(e,i){return this.http.get(`${this.apiUrl}/v1/purchase_orders/${e}/materials/${i}/material_distributions`)}getMaterialDistributionDetails(e){return this.http.get(`${this.apiUrl}/v1/material_distributions/${e}`)}}d.\u0275fac=function(e){return new(e||d)(t.LFG(q.eN),t.LFG(U.yh))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"});var A=a(7185),M=a(3556),_=a(433),p=a(3224);function L(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"tr",26)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"date"),t.qZA(),t.TgZ(17,"td")(18,"div",27)(19,"button",28),t.NdJ("click",function(){const s=t.CHM(i).$implicit,l=t.oxw(2);return t.KtG(l.onView(s.id))}),t._UZ(20,"i",29),t.qZA()()()()}if(2&r){const i=e.$implicit,n=e.index,o=t.oxw(2);t.xp6(2),t.Oqu(n+o.serialNo),t.xp6(2),t.Oqu(i.po_no),t.xp6(2),t.Oqu(t.xi3(7,7,i.po_date,"dd/MM/yyyy")),t.xp6(3),t.Oqu(i.status),t.xp6(2),t.Oqu(i.vendor_name),t.xp6(2),t.Oqu(i.order_year),t.xp6(2),t.Oqu(t.xi3(16,10,i.target_date,"dd/MM/yyyy"))}}function N(r,e){if(1&r&&(t.TgZ(0,"tbody"),t.YNc(1,L,21,13,"tr",25),t.qZA()),2&r){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.poList)}}function I(r,e){1&r&&(t.TgZ(0,"h5",30),t._uU(1," No data found\n"),t.qZA())}function k(r,e){1&r&&t._UZ(0,"div",31)}function Y(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"div",32)(1,"app-pagination",33),t.NdJ("pageChange",function(o){t.CHM(i);const s=t.oxw();return t.KtG(s.onPageChange(o))}),t.qZA()()}if(2&r){const i=t.oxw();t.xp6(1),t.Q6J("pagination",i.pagination)}}class m{constructor(e,i,n,o){this.poService=e,this.toastrService=i,this.store=n,this.router=o,this.poList=[],this.isLoading=!1,this.searchKeyWord="",this.onSearchKeyWordChange=new O.x,this.isPODownloading=!1,this.subscriptions=new T.w0;const s=this.store.select(D).subscribe(l=>{this.pagination=l.pagination,this.searchKeyWord=l.searchTerm,this.selectedPOStatus=l.poStatus});this.subscriptions.add(s),this.onSearchKeyWordChange.pipe((0,y.b)(1e3),(0,C.x)()).subscribe(l=>{this.store.dispatch((0,f.t6)({searchTerm:l})),this.onPageChange(1)})}ngOnInit(){this.getAllPO()}ngOnDestroy(){this.subscriptions.unsubscribe()}getAllPO(){this.isLoading=!0;const e=this.poService.getAllPO().subscribe(i=>{this.isLoading=!1,this.poList=i.purchase_orders,this.store.dispatch((0,f._j)({pagination:i.pagination})),this.serialNo=this.pagination.start_at},i=>{this.isLoading=!1,this.toastrService.error(i.errors[0])});this.subscriptions.add(e)}onPageChange(e){this.store.dispatch((0,f.Dd)({current_page:e})),this.getAllPO()}onView(e){this.router.navigateByUrl(`purchase_orders/view/${e}`)}onFilterPOStatus(){this.store.dispatch((0,f.k0)({poStatus:this.selectedPOStatus})),this.onPageChange(1)}onDownloadPoDetails(){this.isPODownloading=!0;const e=this.poService.downloadPoDetails().subscribe(i=>{const n=document.createElement("a");n.href=i.url,n.click(),window.URL.revokeObjectURL(n.href),n.remove(),this.isPODownloading=!1},i=>{this.toastrService.error(i.errors[0]),this.isPODownloading=!1});this.subscriptions.add(e)}}function J(r,e){if(1&r&&(t.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"h6"),t._uU(5,"PO No"),t.qZA(),t.TgZ(6,"h6"),t._uU(7,"\u2794"),t.qZA()(),t.TgZ(8,"h6",15),t._uU(9),t.qZA()(),t.TgZ(10,"div",13)(11,"div",14)(12,"h6"),t._uU(13,"PO Date"),t.qZA(),t.TgZ(14,"h6"),t._uU(15,"\u2794"),t.qZA()(),t.TgZ(16,"h6",15),t._uU(17),t.ALo(18,"date"),t.qZA()(),t.TgZ(19,"div",13)(20,"div",14)(21,"h6"),t._uU(22,"Godown"),t.qZA(),t.TgZ(23,"h6"),t._uU(24,"\u2794"),t.qZA()(),t.TgZ(25,"h6",15),t._uU(26),t.qZA()(),t.TgZ(27,"div",13)(28,"div",14)(29,"h6"),t._uU(30,"Vendor Address"),t.qZA(),t.TgZ(31,"h6"),t._uU(32,"\u2794"),t.qZA()(),t.TgZ(33,"h6",15),t._uU(34),t.qZA()(),t.TgZ(35,"div",13)(36,"div",14)(37,"h6"),t._uU(38,"Order Year"),t.qZA(),t.TgZ(39,"h6"),t._uU(40,"\u2794"),t.qZA()(),t.TgZ(41,"h6",15),t._uU(42),t.qZA()()(),t.TgZ(43,"div",12)(44,"div",13)(45,"div",14)(46,"h6"),t._uU(47,"Status"),t.qZA(),t.TgZ(48,"h6"),t._uU(49,"\u2794"),t.qZA()(),t.TgZ(50,"h6",15),t._uU(51),t.qZA()(),t.TgZ(52,"div",13)(53,"div",14)(54,"h6"),t._uU(55,"Region"),t.qZA(),t.TgZ(56,"h6"),t._uU(57,"\u2794"),t.qZA()(),t.TgZ(58,"h6",15),t._uU(59),t.qZA()(),t.TgZ(60,"div",13)(61,"div",14)(62,"h6"),t._uU(63,"Vendor Name"),t.qZA(),t.TgZ(64,"h6"),t._uU(65,"\u2794"),t.qZA()(),t.TgZ(66,"h6",15),t._uU(67),t.qZA()(),t.TgZ(68,"div",13)(69,"div",14)(70,"h6"),t._uU(71,"PO Days"),t.qZA(),t.TgZ(72,"h6"),t._uU(73,"\u2794"),t.qZA()(),t.TgZ(74,"h6",15),t._uU(75),t.qZA()(),t.TgZ(76,"div",13)(77,"div",14)(78,"h6"),t._uU(79,"Target Date"),t.qZA(),t.TgZ(80,"h6"),t._uU(81,"\u2794"),t.qZA()(),t.TgZ(82,"h6",15),t._uU(83),t.ALo(84,"date"),t.qZA()()()()),2&r){const i=t.oxw();t.xp6(9),t.hij(" ",i.purchaseOrder.id?i.purchaseOrder.id:"-"," "),t.xp6(8),t.hij(" ",t.xi3(18,10,i.purchaseOrder.po_date,"dd/MM/yyyy")," "),t.xp6(9),t.hij(" ",i.purchaseOrder.godown?i.purchaseOrder.godown:"-"," "),t.xp6(8),t.hij(" ",i.purchaseOrder.vendor_address?i.purchaseOrder.vendor_address:"-"," "),t.xp6(8),t.hij(" ",i.purchaseOrder.order_year?i.purchaseOrder.order_year:"-"," "),t.xp6(9),t.hij(" ",i.purchaseOrder.status?i.purchaseOrder.status:"-"," "),t.xp6(8),t.hij(" ",i.purchaseOrder.region?i.purchaseOrder.region:"-"," "),t.xp6(8),t.hij(" ",i.purchaseOrder.vendor_name?i.purchaseOrder.vendor_name:"-"," "),t.xp6(8),t.hij(" ",i.purchaseOrder.po_days?i.purchaseOrder.po_days:"-"," "),t.xp6(8),t.hij(" ",t.xi3(84,13,i.purchaseOrder.target_date,"dd/MM/yyyy")," ")}}function j(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"table",18)(1,"thead",19)(2,"tr")(3,"th",20),t._uU(4," Title "),t._UZ(5,"i",21),t.qZA(),t.TgZ(6,"th",20),t._uU(7," Medium "),t._UZ(8,"i",21),t.qZA(),t.TgZ(9,"th",20),t._uU(10," Standard "),t._UZ(11,"i",21),t.qZA(),t.TgZ(12,"th",20),t._uU(13," Net Copies "),t._UZ(14,"i",21),t.qZA(),t.TgZ(15,"th",20),t._uU(16,"Size"),t._UZ(17,"i",21),t.qZA(),t.TgZ(18,"th",20),t._uU(19,"Mode of Printing"),t._UZ(20,"i",21),t.qZA(),t.TgZ(21,"th",20),t._uU(22,"Type of Copies"),t._UZ(23,"i",21),t.qZA(),t.TgZ(24,"th",20),t._uU(25,"Actions"),t._UZ(26,"i",21),t.qZA()()(),t.TgZ(27,"tbody")(28,"tr",22)(29,"td"),t._uU(30),t.qZA(),t.TgZ(31,"td"),t._uU(32),t.qZA(),t.TgZ(33,"td"),t._uU(34),t.qZA(),t.TgZ(35,"td"),t._uU(36),t.qZA(),t.TgZ(37,"td"),t._uU(38),t.qZA(),t.TgZ(39,"td"),t._uU(40),t.qZA(),t.TgZ(41,"td"),t._uU(42),t.qZA(),t.TgZ(43,"td")(44,"button",23),t.NdJ("click",function(){const s=t.CHM(i).$implicit,l=t.oxw(2);return t.KtG(l.onViewMaterialDistribution(l.purchaseOrder.id,s.id))}),t._uU(45," Material Distribution "),t.qZA()()()()()}if(2&r){const i=e.$implicit;t.xp6(30),t.Oqu(i.title),t.xp6(2),t.Oqu(i.medium),t.xp6(2),t.Oqu(i.standard),t.xp6(2),t.Oqu(i.net_copies),t.xp6(2),t.Oqu(i.size),t.xp6(2),t.Oqu(i.mode_of_printing),t.xp6(2),t.Oqu(i.type_of_copies)}}function S(r,e){if(1&r&&(t.TgZ(0,"div",16),t.YNc(1,j,46,7,"table",17),t.qZA()),2&r){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.materialList)}}function Q(r,e){1&r&&t._UZ(0,"div",24)}function F(r,e){1&r&&(t.TgZ(0,"h5",25),t._uU(1," No list found "),t.qZA())}m.\u0275fac=function(e){return new(e||m)(t.Y36(d),t.Y36(A._W),t.Y36(U.yh),t.Y36(c.F0))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-purchase-orders-list"]],decls:47,vars:8,consts:[[1,"mb-3"],[1,"input-group","row"],[1,"d-flex","flex-column","flex-sm-row","justify-content-sm-between","mb-3"],[1,"d-flex","flex-column","flex-sm-row","justify-content-sm-between"],[1,"col-12","col-sm-6","col-md-5","col-lg-4","d-flex"],["type","search","placeholder","Search","onkeypress","return event.charCode !== 32 || this.value.trim().length !== 0",1,"form-control","input",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-secondary","input-button"],[1,"fa","fa-search"],["cButton","","variant","outline","color","info","type","button","title","Download PO Report as Excel",1,"mt-2",3,"disabled","click"],[1,"ms-1",3,"ngClass"],[1,"table-responsive"],[1,"table","table-hover"],[1,"bg-secondary"],["scope","col"],[1,"p-0",3,"ngModel","ngModelChange","change"],["value","All"],["value","none"],["value","partial"],["value","full"],["scope","col",1,"text-center"],[4,"ngIf"],["class","text-center m-auto w-100",4,"ngIf"],[1,"d-flex","justify-content-center","mt-5"],["class","spinner-border","role","status",4,"ngIf"],["class","d-flex",4,"ngIf"],["class","bg-white",4,"ngFor","ngForOf"],[1,"bg-white"],[1,"gap-3","d-flex"],["title","View",1,"btn-view","opacity-75","rounded-circle","px-2","py-1","text-white","fw-bolder","cursor-pointer","view-button","mx-auto",3,"click"],[1,"bi","bi-eye-fill"],[1,"text-center","m-auto","w-100"],["role","status",1,"spinner-border"],[1,"d-flex"],[1,"mx-auto","my-3",3,"pagination","pageChange"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),t._uU(4,"Purchase Orders"),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4)(7,"input",5),t.NdJ("ngModelChange",function(o){return i.searchKeyWord=o})("ngModelChange",function(o){return i.onSearchKeyWordChange.next(o)}),t.qZA(),t.TgZ(8,"button",6),t._UZ(9,"i",7),t.qZA()(),t.TgZ(10,"button",8),t.NdJ("click",function(){return i.onDownloadPoDetails()}),t._uU(11," Download Report "),t._UZ(12,"i",9),t.qZA()()()(),t.TgZ(13,"div",10)(14,"table",11)(15,"thead",12)(16,"tr")(17,"th",13),t._uU(18,"S No"),t.qZA(),t.TgZ(19,"th",13),t._uU(20,"PO No"),t.qZA(),t.TgZ(21,"th",13),t._uU(22,"PO Date"),t.qZA(),t.TgZ(23,"th",13),t._uU(24," Status: "),t.TgZ(25,"select",14),t.NdJ("ngModelChange",function(o){return i.selectedPOStatus=o})("change",function(){return i.onFilterPOStatus()}),t.TgZ(26,"option",15),t._uU(27,"All"),t.qZA(),t.TgZ(28,"option",16),t._uU(29,"None"),t.qZA(),t.TgZ(30,"option",17),t._uU(31,"Partial"),t.qZA(),t.TgZ(32,"option",18),t._uU(33,"Full"),t.qZA()()(),t.TgZ(34,"th",13),t._uU(35,"Vendor Name"),t.qZA(),t.TgZ(36,"th",13),t._uU(37,"Order Year"),t.qZA(),t.TgZ(38,"th",13),t._uU(39,"Target Date"),t.qZA(),t.TgZ(40,"th",19),t._uU(41,"Actions"),t.qZA()()(),t.YNc(42,N,2,1,"tbody",20),t.qZA()(),t.YNc(43,I,2,0,"h5",21),t.TgZ(44,"div",22),t.YNc(45,k,1,0,"div",23),t.qZA(),t.YNc(46,Y,2,1,"div",24)),2&e&&(t.xp6(7),t.Q6J("ngModel",i.searchKeyWord),t.xp6(3),t.Q6J("disabled",i.isPODownloading),t.xp6(2),t.Q6J("ngClass",i.isPODownloading?"fa fa-spinner fa-spin":"fa fa-download"),t.xp6(13),t.Q6J("ngModel",i.selectedPOStatus),t.xp6(17),t.Q6J("ngIf",!i.isLoading&&i.poList.length),t.xp6(1),t.Q6J("ngIf",0===i.poList.length),t.xp6(2),t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("ngIf",null==i.poList?null:i.poList.length))},dependencies:[u.mk,u.sg,u.O5,M.Q,_.YN,_.Kr,_.Fj,_.EJ,_.JJ,_.On,p.Hq3,u.uU],styles:[".btn-view[_ngcontent-%COMP%]{background:#89f3b3;transition:all .2s ease-in-out}.btn-view[_ngcontent-%COMP%]   .bi-eye-fill[_ngcontent-%COMP%]{color:#078439}.view-button[_ngcontent-%COMP%]:hover{background-color:#078439;cursor:pointer}.view-button[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#fff}.bg-edit[_ngcontent-%COMP%]{background:#bcbaf7}.bg-edit[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#230b34}.bg-delete[_ngcontent-%COMP%]{background:#f795a0}.bg-delete[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#830000}.view-button[_ngcontent-%COMP%]{border:none}.input[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}.input-button[_ngcontent-%COMP%]{border-top-left-radius:0;border-bottom-left-radius:0}select[_ngcontent-%COMP%]{font-size:16px;padding:4px;border-radius:4px;border:1px solid #ccc;background-color:#fff;color:#333;cursor:pointer;outline:none}[_ngcontent-%COMP%]::-webkit-search-cancel-button{cursor:pointer}"]});class Z{constructor(e,i,n,o){this.poService=e,this.activatedRoute=i,this.toastrService=n,this.router=o,this.materialList=[],this.isLoading=!1,this.subscriptions=new T.w0,this.poId=+this.activatedRoute.snapshot.params.id}ngOnInit(){this.getPODetails()}ngOnDestroy(){this.subscriptions.unsubscribe()}getPODetails(){this.isLoading=!0;const e=this.poService.getPODetials(this.poId).subscribe(i=>{this.isLoading=!1,this.purchaseOrder=i,this.materialList=i.Material},i=>{this.isLoading=!1,this.toastrService.error(i.errors[0])});this.subscriptions.add(e)}onBack(){this.router.navigate(["purchase_orders"])}onViewMaterialDistribution(e,i){this.router.navigate(["purchase_orders/view",e,i])}}function V(r,e){if(1&r&&(t.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"h6"),t._uU(5,"Title"),t.qZA(),t.TgZ(6,"h6"),t._uU(7,"\u2794"),t.qZA()(),t.TgZ(8,"h6",16),t._uU(9),t.qZA()(),t.TgZ(10,"div",14)(11,"div",15)(12,"h6"),t._uU(13,"Medium"),t.qZA(),t.TgZ(14,"h6"),t._uU(15,"\u2794"),t.qZA()(),t.TgZ(16,"h6",16),t._uU(17),t.qZA()(),t.TgZ(18,"div",14)(19,"div",15)(20,"h6"),t._uU(21,"Size"),t.qZA(),t.TgZ(22,"h6"),t._uU(23,"\u2794"),t.qZA()(),t.TgZ(24,"h6",16),t._uU(25),t.qZA()(),t.TgZ(26,"div",14)(27,"div",15)(28,"h6"),t._uU(29,"Type of Copies"),t.qZA(),t.TgZ(30,"h6"),t._uU(31,"\u2794"),t.qZA()(),t.TgZ(32,"h6",16),t._uU(33),t.qZA()(),t.TgZ(34,"div",14)(35,"div",15)(36,"h6"),t._uU(37,"Order Year"),t.qZA(),t.TgZ(38,"h6"),t._uU(39,"\u2794"),t.qZA()(),t.TgZ(40,"h6",16),t._uU(41),t.qZA()()(),t.TgZ(42,"div",13)(43,"div",14)(44,"div",15)(45,"h6"),t._uU(46,"Standard"),t.qZA(),t.TgZ(47,"h6"),t._uU(48,"\u2794"),t.qZA()(),t.TgZ(49,"h6",16),t._uU(50),t.qZA()(),t.TgZ(51,"div",14)(52,"div",15)(53,"h6"),t._uU(54,"Net Copies"),t.qZA(),t.TgZ(55,"h6"),t._uU(56,"\u2794"),t.qZA()(),t.TgZ(57,"h6",16),t._uU(58),t.qZA()(),t.TgZ(59,"div",14)(60,"div",15)(61,"h6"),t._uU(62,"Mode of Printing"),t.qZA(),t.TgZ(63,"h6"),t._uU(64,"\u2794"),t.qZA()(),t.TgZ(65,"h6",16),t._uU(66),t.qZA()(),t.TgZ(67,"div",14)(68,"div",15)(69,"h6"),t._uU(70,"PO Days"),t.qZA(),t.TgZ(71,"h6"),t._uU(72,"\u2794"),t.qZA()(),t.TgZ(73,"h6",16),t._uU(74),t.qZA()(),t.TgZ(75,"div",14)(76,"div",15)(77,"h6"),t._uU(78,"Target Date"),t.qZA(),t.TgZ(79,"h6"),t._uU(80,"\u2794"),t.qZA()(),t.TgZ(81,"h6",16),t._uU(82),t.ALo(83,"date"),t.qZA()()()()),2&r){const i=t.oxw(2);t.xp6(9),t.hij(" ",i.materialDistributionList.material.title?i.materialDistributionList.material.title:"-"," "),t.xp6(8),t.hij(" ",i.materialDistributionList.material.medium?i.materialDistributionList.material.medium:"-"," "),t.xp6(8),t.hij(" ",i.materialDistributionList.material.size?i.materialDistributionList.material.size:"-"," "),t.xp6(8),t.hij(" ",i.materialDistributionList.material.type_of_copies?i.materialDistributionList.material.type_of_copies:"-"," "),t.xp6(8),t.hij(" ",i.materialDistributionList.purchaseOrder.order_year?i.materialDistributionList.purchaseOrder.order_year:"-"," "),t.xp6(9),t.hij(" ",i.materialDistributionList.material.standard?i.materialDistributionList.material.standard:"-"," "),t.xp6(8),t.hij(" ",i.materialDistributionList.material.net_copies?i.materialDistributionList.material.net_copies:"-"," "),t.xp6(8),t.hij(" ",i.materialDistributionList.material.mode_of_printing?i.materialDistributionList.material.mode_of_printing:"-"," "),t.xp6(8),t.hij(" ",i.materialDistributionList.purchaseOrder.po_days?i.materialDistributionList.purchaseOrder.po_days:"-"," "),t.xp6(8),t.hij(" ",t.xi3(83,10,i.materialDistributionList.purchaseOrder.target_date,"dd/MM/YYYY")," ")}}function B(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"tr",24)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"div",25)(11,"button",26),t.NdJ("click",function(){const s=t.CHM(i).$implicit,l=t.oxw(3);return t.KtG(l.onViewMaterialDistributionDetails(s.id))}),t._UZ(12,"i",27),t.qZA()()()()}if(2&r){const i=e.$implicit;t.xp6(2),t.Oqu(i.branch.name),t.xp6(2),t.Oqu(i.net_copies),t.xp6(2),t.Oqu(i.delivery_status),t.xp6(2),t.Oqu(i.branch.dl_type),t.xp6(3),t.Q6J("disabled","None"===i.delivery_status)}}function R(r,e){if(1&r&&(t.TgZ(0,"div",17)(1,"table",18)(2,"thead",19)(3,"tr")(4,"th",20),t._uU(5," Branch Name "),t._UZ(6,"i",21),t.qZA(),t.TgZ(7,"th",20),t._uU(8," Net Copies "),t._UZ(9,"i",21),t.qZA(),t.TgZ(10,"th",20),t._uU(11," Delivery status "),t._UZ(12,"i",21),t.qZA(),t.TgZ(13,"th",20),t._uU(14,"DL Type"),t._UZ(15,"i",21),t.qZA(),t.TgZ(16,"th",22),t._uU(17,"Actions"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,B,13,5,"tr",23),t.qZA()()()),2&r){const i=t.oxw(2);t.xp6(19),t.Q6J("ngForOf",i.materialDistributionList.materialDistribution)}}function $(r,e){if(1&r&&(t.TgZ(0,"div")(1,"h3",9),t._uU(2,"Material Details"),t.qZA(),t.YNc(3,V,84,13,"div",10),t._UZ(4,"hr"),t.TgZ(5,"h3",9),t._uU(6,"Material Distributions"),t.qZA(),t.YNc(7,R,20,1,"div",11),t.qZA()),2&r){const i=t.oxw();t.xp6(3),t.Q6J("ngIf",i.materialDistributionList.material.id),t.xp6(4),t.Q6J("ngIf",!i.isLoading&&i.materialDistributionList.materialDistribution.length)}}function H(r,e){1&r&&t._UZ(0,"div",28)}function K(r,e){1&r&&(t.TgZ(0,"h5",29),t._uU(1," No Details found "),t.qZA())}function W(r,e){1&r&&(t.TgZ(0,"h5",30),t._uU(1," No Distributions to show\n"),t.qZA())}Z.\u0275fac=function(e){return new(e||Z)(t.Y36(d),t.Y36(c.gz),t.Y36(A._W),t.Y36(c.F0))},Z.\u0275cmp=t.Xpm({type:Z,selectors:[["app-po-view"]],decls:15,vars:4,consts:[[1,"mb-4"],["cButton","","variant","outline","color","info","title","Click to go back",3,"click"],[1,"min-width-18px"],["aria-hidden","true",1,"fa","fa-chevron-left"],[1,"mb-3"],["class","row mt-4",4,"ngIf"],[1,"mt-4"],["class","table-responsive",4,"ngIf"],[1,"d-flex","justify-content-center","mt-5"],["class","spinner-border","role","status",4,"ngIf"],["class","text-center mt-5",4,"ngIf"],[1,"row","mt-4"],[1,"col-12","col-md-8","col-lg-5"],[1,"row","mb-2"],[1,"d-flex","justify-content-between","col-4"],[1,"col-8","text-break","text-primary"],[1,"table-responsive"],["class","table table-hover mt-3",4,"ngFor","ngForOf"],[1,"table","table-hover","mt-3"],[1,"bg-secondary"],["scope","col"],[1,"text-info","bi"],[1,"bg-white"],["cButton","","variant","outline","color","info","title","View material distributions",3,"click"],["role","status",1,"spinner-border"],[1,"text-center","mt-5"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return i.onBack()}),t.TgZ(2,"span",2),t._UZ(3,"i",3),t.qZA(),t._uU(4," Back "),t.qZA()(),t.TgZ(5,"h3",4),t._uU(6,"Purchase Order Details:"),t.qZA(),t.YNc(7,J,85,16,"div",5),t._UZ(8,"hr"),t.TgZ(9,"h3",6),t._uU(10,"Materials:"),t.qZA(),t.YNc(11,S,2,1,"div",7),t.TgZ(12,"div",8),t.YNc(13,Q,1,0,"div",9),t.YNc(14,F,2,0,"h5",10),t.qZA()),2&e&&(t.xp6(7),t.Q6J("ngIf",null==i.purchaseOrder?null:i.purchaseOrder.id),t.xp6(4),t.Q6J("ngIf",!i.isLoading&&i.materialList.length),t.xp6(2),t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("ngIf",!i.isLoading&&!i.materialList.length))},dependencies:[u.sg,u.O5,p.Hq3,u.uU]});class v{constructor(e,i,n,o,s){this.activatedRoute=e,this.location=i,this.poService=n,this.toastrService=o,this.router=s,this.isLoading=!1,this.subscriptions=new T.w0;const l=this.activatedRoute.snapshot.params;this.poId=+l.po_id,this.materialId=+l.material_id}ngOnInit(){this.getMaterialDistribution()}ngOnDestroy(){this.subscriptions.unsubscribe()}onBackToPOView(){this.location.back()}getMaterialDistribution(){this.isLoading=!0;const e=this.poService.getMaterialDistributionList(this.poId,this.materialId).subscribe(i=>{this.materialDistributionList=i,this.isLoading=!1},i=>{this.toastrService.error(i.errors[0]),this.isLoading=!1});this.subscriptions.add(e)}onViewMaterialDistributionDetails(e){this.router.navigate(["purchase_orders/view/",this.poId,this.materialId,e])}}v.\u0275fac=function(e){return new(e||v)(t.Y36(c.gz),t.Y36(u.Ye),t.Y36(d),t.Y36(A._W),t.Y36(c.F0))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-po-material-view"]],decls:10,vars:4,consts:[[1,"mb-3"],["cButton","","variant","outline","color","info","title","Click to go back",3,"click"],[1,"min-width-18px"],["aria-hidden","true",1,"fa","fa-chevron-left"],[4,"ngIf"],[1,"d-flex","justify-content-center","mt-5"],["class","spinner-border","role","status",4,"ngIf"],["class","text-center mt-5",4,"ngIf"],["class","text-center mb-5",4,"ngIf"],[1,"mb-3","mt-4"],["class","row mt-4",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"row","mt-4"],[1,"col-12","col-md-8","col-lg-5"],[1,"row","mb-2"],[1,"d-flex","justify-content-between","col-4"],[1,"col-8","text-break","text-primary"],[1,"table-responsive"],[1,"table","table-hover"],[1,"bg-secondary"],["scope","col"],[1,"text-info","bi"],["scope","col",1,"text-center"],["class","bg-white",4,"ngFor","ngForOf"],[1,"bg-white"],[1,"d-flex","gap-3"],["title","View",1,"btn-view","opacity-75","rounded-circle","px-2","py-1","text-white","fw-bolder","mx-auto",3,"disabled","click"],[1,"bi","bi-eye-fill"],["role","status",1,"spinner-border"],[1,"text-center","mt-5"],[1,"text-center","mb-5"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return i.onBackToPOView()}),t.TgZ(2,"span",2),t._UZ(3,"i",3),t.qZA(),t._uU(4," Back "),t.qZA()(),t.YNc(5,$,8,2,"div",4),t.TgZ(6,"div",5),t.YNc(7,H,1,0,"div",6),t.YNc(8,K,2,0,"h5",7),t.qZA(),t.YNc(9,W,2,0,"h5",8)),2&e&&(t.xp6(5),t.Q6J("ngIf",!i.isLoading&&i.materialDistributionList),t.xp6(2),t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("ngIf",!i.isLoading&&!i.materialDistributionList),t.xp6(1),t.Q6J("ngIf",!i.isLoading&&!i.materialDistributionList.materialDistribution.length))},dependencies:[u.sg,u.O5,p.Hq3,u.uU],styles:[".btn-view[_ngcontent-%COMP%]{background:#89f3b3;transition:all .2s ease-in-out;border:none}.btn-view[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#078439}.btn-view[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#078439;cursor:pointer}.btn-view[_ngcontent-%COMP%]:hover:not(:disabled)   i[_ngcontent-%COMP%]{color:#fff}.btn-view[_ngcontent-%COMP%]:disabled{background:lightgray}"]});var z=a(9886);function E(r,e){1&r&&(t.TgZ(0,"h5",8),t._uU(1," No Details found "),t.qZA())}function G(r,e){if(1&r&&(t.TgZ(0,"div",5),t._UZ(1,"div",6),t.YNc(2,E,2,0,"h5",7),t.qZA()),2&r){const i=t.oxw();t.xp6(2),t.Q6J("ngIf",!i.isLoading&&!i.materialDistributionDetails.material_delivery.id)}}function X(r,e){if(1&r&&(t.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"h6"),t._uU(5,"Delivery Status"),t.qZA(),t.TgZ(6,"h6"),t._uU(7,"\u2794"),t.qZA()(),t.TgZ(8,"h6",23),t._uU(9),t.qZA()(),t.TgZ(10,"div",21)(11,"div",22)(12,"h6"),t._uU(13,"Delivered Date"),t.qZA(),t.TgZ(14,"h6"),t._uU(15,"\u2794"),t.qZA()(),t.TgZ(16,"h6",23),t._uU(17),t.ALo(18,"date"),t.qZA()(),t.TgZ(19,"div",21)(20,"div",22)(21,"h6"),t._uU(22,"Received Quantity"),t.qZA(),t.TgZ(23,"h6"),t._uU(24,"\u2794"),t.qZA()(),t.TgZ(25,"h6",23),t._uU(26),t.qZA()(),t.TgZ(27,"div",21)(28,"div",22)(29,"h6"),t._uU(30,"Balance Quantity"),t.qZA(),t.TgZ(31,"h6"),t._uU(32,"\u2794"),t.qZA()(),t.TgZ(33,"h6",23),t._uU(34),t.qZA()(),t.TgZ(35,"div",21)(36,"div",22)(37,"h6"),t._uU(38,"Quantity / Bundle"),t.qZA(),t.TgZ(39,"h6"),t._uU(40,"\u2794"),t.qZA()(),t.TgZ(41,"h6",23),t._uU(42),t.qZA()(),t.TgZ(43,"div",21)(44,"div",22)(45,"h6"),t._uU(46,"No of Bundles"),t.qZA(),t.TgZ(47,"h6"),t._uU(48,"\u2794"),t.qZA()(),t.TgZ(49,"h6",23),t._uU(50),t.qZA()(),t.TgZ(51,"div",21)(52,"div",22)(53,"h6"),t._uU(54,"Quantity as Bundle"),t.qZA(),t.TgZ(55,"h6"),t._uU(56,"\u2794"),t.qZA()(),t.TgZ(57,"h6",23),t._uU(58),t.qZA()(),t.TgZ(59,"div",21)(60,"div",22)(61,"h6"),t._uU(62,"Loose Copies"),t.qZA(),t.TgZ(63,"h6"),t._uU(64,"\u2794"),t.qZA()(),t.TgZ(65,"h6",23),t._uU(66),t.qZA()()(),t.TgZ(67,"div",24)(68,"div",21)(69,"div",22)(70,"h6"),t._uU(71,"Delivery Challan No"),t.qZA(),t.TgZ(72,"h6"),t._uU(73,"\u2794"),t.qZA()(),t.TgZ(74,"h6",23),t._uU(75),t.qZA()(),t.TgZ(76,"div",21)(77,"div",22)(78,"h6"),t._uU(79,"Delivery Challan Date"),t.qZA(),t.TgZ(80,"h6"),t._uU(81,"\u2794"),t.qZA()(),t.TgZ(82,"h6",23),t._uU(83),t.ALo(84,"date"),t.qZA()(),t.TgZ(85,"div",21)(86,"div",22)(87,"h6"),t._uU(88,"Delivery Challan Quantity"),t.qZA(),t.TgZ(89,"h6"),t._uU(90,"\u2794"),t.qZA()(),t.TgZ(91,"h6",23),t._uU(92),t.qZA()(),t.TgZ(93,"div",21)(94,"div",22)(95,"h6"),t._uU(96,"Delivery Challan Shortage Quantity"),t.qZA(),t.TgZ(97,"h6"),t._uU(98,"\u2794"),t.qZA()(),t.TgZ(99,"h6",23),t._uU(100),t.qZA()(),t.TgZ(101,"div",21)(102,"div",22)(103,"h6"),t._uU(104,"Defectives Count"),t.qZA(),t.TgZ(105,"h6"),t._uU(106,"\u2794"),t.qZA()(),t.TgZ(107,"h6",23),t._uU(108),t.qZA()(),t.TgZ(109,"div",21)(110,"div",22)(111,"h6"),t._uU(112,"Defectives Reason"),t.qZA(),t.TgZ(113,"h6"),t._uU(114,"\u2794"),t.qZA()(),t.TgZ(115,"h6",23),t._uU(116),t.qZA()(),t.TgZ(117,"div",21)(118,"div",22)(119,"h6"),t._uU(120,"Weights"),t.qZA(),t.TgZ(121,"h6"),t._uU(122,"\u2794"),t.qZA()(),t.TgZ(123,"h6",23),t._uU(124),t.qZA()(),t.TgZ(125,"div",21)(126,"div",22)(127,"h6"),t._uU(128,"Remarks"),t.qZA(),t.TgZ(129,"h6"),t._uU(130,"\u2794"),t.qZA()(),t.TgZ(131,"h6",23),t._uU(132),t.qZA()()()()),2&r){const i=t.oxw(2);t.xp6(9),t.hij(" ",i.materialDistributionDetails.material_delivery.delivery_status?i.materialDistributionDetails.material_delivery.delivery_status:"-"," "),t.xp6(8),t.hij(" ",t.xi3(18,16,i.materialDistributionDetails.book_receipt_voucher.delivery_date,"dd/MM/yyy, h:mm a")," "),t.xp6(9),t.hij(" ",i.materialDistributionDetails.material_delivery.received_copies," "),t.xp6(8),t.hij(" ",i.materialDistributionDetails.material_delivery.balanced_copies," "),t.xp6(8),t.hij(" ",i.materialDistributionDetails.material_delivery.copies_per_bundle," "),t.xp6(8),t.hij(" ",i.materialDistributionDetails.material_delivery.received_bundles," "),t.xp6(8),t.hij(" ",i.materialDistributionDetails.material_delivery.qty_as_bundles," "),t.xp6(8),t.hij(" ",i.materialDistributionDetails.material_delivery.received_loose_copies," "),t.xp6(9),t.hij(" ",i.materialDistributionDetails.material_delivery.dv_no," "),t.xp6(8),t.hij(" ",t.xi3(84,19,i.materialDistributionDetails.material_delivery.dv_date,"dd/MM/yyyy")," "),t.xp6(9),t.hij(" ",i.materialDistributionDetails.material_delivery.dv_qty?i.materialDistributionDetails.material_delivery.dv_qty:"-"," "),t.xp6(8),t.hij(" ",i.materialDistributionDetails.material_delivery.dv_shortage_copies?i.materialDistributionDetails.material_delivery.dv_shortage_copies:"-"," "),t.xp6(8),t.hij(" ",i.materialDistributionDetails.material_delivery.defectives_count," "),t.xp6(8),t.hij(" ",i.materialDistributionDetails.material_delivery.defective_reason?i.materialDistributionDetails.material_delivery.defective_reason:"-"," "),t.xp6(8),t.hij(" ",i.materialDistributionDetails.material_delivery.weights?i.materialDistributionDetails.material_delivery.weights:"-"," "),t.xp6(8),t.hij(" ",i.materialDistributionDetails.material_delivery.remarks?i.materialDistributionDetails.material_delivery.remarks:"-"," ")}}function tt(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"div",25)(1,"img",26),t.NdJ("click",function(){t.CHM(i),t.oxw();const o=t.MAs(9),s=t.oxw();return t.KtG(s.openModal(o))}),t.qZA()()}if(2&r){const i=t.oxw(2);t.xp6(1),t.Q6J("src",i.materialDistributionDetails.material_delivery.voucher_image_url,t.LSH)}}function it(r,e){if(1&r&&(t.TgZ(0,"div",30),t._UZ(1,"img",31),t.qZA()),2&r){const i=t.oxw(3);t.xp6(1),t.Q6J("src",i.materialDistributionDetails.material_delivery.voucher_image_url,t.LSH)}}function et(r,e){if(1&r){const i=t.EpF();t.YNc(0,it,2,1,"div",27),t.TgZ(1,"div",28)(2,"button",29),t.NdJ("click",function(){t.CHM(i);const o=t.oxw(2);return t.KtG(o.modalRef.hide())}),t._uU(3," Close "),t.qZA()()}if(2&r){const i=t.oxw(2);t.Q6J("ngIf",i.materialDistributionDetails.material_delivery.voucher_image_url)}}function rt(r,e){1&r&&(t.TgZ(0,"h5",32),t._uU(1," No images Found "),t.qZA())}function nt(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"img",35),t.NdJ("click",function(){t.CHM(i),t.oxw();const o=t.MAs(3),s=t.oxw(2);return t.KtG(s.openModal(o))}),t.qZA()}if(2&r){const i=t.oxw().$implicit;t.Q6J("src",i,t.LSH)}}function ot(r,e){if(1&r){const i=t.EpF();t.TgZ(0,"div",36),t._UZ(1,"img",37),t.qZA(),t.TgZ(2,"div",28)(3,"button",29),t.NdJ("click",function(){t.CHM(i);const o=t.oxw(3);return t.KtG(o.modalRef.hide())}),t._uU(4," Close "),t.qZA()()}if(2&r){const i=t.oxw().$implicit;t.xp6(1),t.Q6J("src",i,t.LSH)}}function at(r,e){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,nt,1,1,"img",33),t.YNc(2,ot,5,1,"ng-template",null,34,t.W1O),t.qZA()),2&r){const i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.materialDistributionDetails.material_delivery.material_image_url)}}function st(r,e){1&r&&(t.TgZ(0,"h5",32),t._uU(1," No images Found "),t.qZA())}function lt(r,e){if(1&r&&(t.TgZ(0,"div")(1,"h3",9),t._uU(2,"Material Delivery Details"),t.qZA(),t.YNc(3,X,133,22,"div",10),t._UZ(4,"hr"),t.TgZ(5,"h3",11),t._uU(6,"Challan Image"),t.qZA(),t.YNc(7,tt,2,1,"div",12),t.YNc(8,et,4,1,"ng-template",null,13,t.W1O),t.YNc(10,rt,2,0,"h5",14),t._UZ(11,"hr",15),t.TgZ(12,"h3",16),t._uU(13,"Material Images"),t.qZA(),t.TgZ(14,"div",17),t.YNc(15,at,4,1,"div",18),t.qZA(),t.YNc(16,st,2,0,"h5",14),t.qZA()),2&r){const i=t.oxw();t.xp6(3),t.Q6J("ngIf",i.materialDistributionDetails.material_delivery.id),t.xp6(4),t.Q6J("ngIf",i.materialDistributionDetails.material_delivery.voucher_image_url),t.xp6(3),t.Q6J("ngIf",!i.materialDistributionDetails.material_delivery.voucher_image_url),t.xp6(5),t.Q6J("ngForOf",i.materialDistributionDetails.material_delivery.material_image_url),t.xp6(1),t.Q6J("ngIf",!i.materialDistributionDetails.material_delivery.material_image_url.length||!i.materialDistributionDetails.material_delivery.material_image_url)}}class b{constructor(e,i,n,o,s){this.poService=e,this.activatedRoute=i,this.toastrService=n,this.modalService=o,this.location=s,this.isLoading=!1,this.subscriptions=new T.w0,this.backdrop={backdrop:"static",keyboard:!1},this.materialDistributionId=+this.activatedRoute.snapshot.params.distribution_id}ngOnInit(){this.getDistributionDetails()}ngOnDestroy(){this.subscriptions.unsubscribe()}openModal(e){this.modalRef=this.modalService.show(e,this.backdrop)}getDistributionDetails(){this.isLoading=!0;const e=this.poService.getMaterialDistributionDetails(this.materialDistributionId).subscribe(i=>{this.isLoading=!1,this.materialDistributionDetails=i},i=>{this.isLoading=!1,this.toastrService.error(i.errors[0])});this.subscriptions.add(e)}onBackToMaterialDistributionsView(){this.location.back()}}b.\u0275fac=function(e){return new(e||b)(t.Y36(d),t.Y36(c.gz),t.Y36(A._W),t.Y36(z.tT),t.Y36(u.Ye))},b.\u0275cmp=t.Xpm({type:b,selectors:[["app-distribution-details"]],decls:6,vars:2,consts:[["cButton","","variant","outline","color","info","title","Click to go back",3,"click"],[1,"min-width-18px"],["aria-hidden","true",1,"fa","fa-chevron-left"],["class","d-flex justify-content-center mt-5",4,"ngIf"],[4,"ngIf"],[1,"d-flex","justify-content-center","mt-5"],["role","status",1,"spinner-border"],["class","text-center mt-5",4,"ngIf"],[1,"text-center","mt-5"],[1,"mb-3","mt-4"],["class","row mt-4",4,"ngIf"],[1,"mb-3","mt-5"],["class","voucher-img-cont",4,"ngIf"],["template",""],["class","text-center mb-5",4,"ngIf"],[1,"mt-5"],[1,"mb-3","mt-3"],[1,"d-flex","gap-5"],[4,"ngFor","ngForOf"],[1,"row","mt-4"],[1,"col-12","col-xl-5"],[1,"row","mb-2"],[1,"d-flex","justify-content-between","col-5"],[1,"col-7","text-break","text-primary"],[1,"col-12","col-xl-7"],[1,"voucher-img-cont"],["alt","voucher-image",1,"voucher-image",3,"src","click"],["class","voucher-img-cont text-center",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],[1,"voucher-img-cont","text-center"],["alt","voucher-image",1,"voucher-image-model",3,"src"],[1,"text-center","mb-5"],["alt","material-image","class","voucher-image",3,"src","click",4,"ngIf"],["materialImage",""],["alt","material-image",1,"voucher-image",3,"src","click"],[1,"text-center"],["alt","material-image",1,"voucher-image-model",3,"src"]],template:function(e,i){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return i.onBackToMaterialDistributionsView()}),t.TgZ(1,"span",1),t._UZ(2,"i",2),t.qZA(),t._uU(3," Back\n"),t.qZA(),t.YNc(4,G,3,1,"div",3),t.YNc(5,lt,17,5,"div",4)),2&e&&(t.xp6(4),t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("ngIf",(null==i.materialDistributionDetails||null==i.materialDistributionDetails.material_delivery?null:i.materialDistributionDetails.material_delivery.id)&&!i.isLoading))},dependencies:[u.sg,u.O5,p.Hq3,u.uU],styles:[".voucher-image[_ngcontent-%COMP%]{max-width:100px;cursor:pointer}.voucher-image-model[_ngcontent-%COMP%]{margin-top:20px;max-width:400px}"]});const ut=[{path:"purchase_orders",component:m},{path:"purchase_orders/view/:id",component:Z},{path:"purchase_orders/view/:po_id/:material_id",component:v},{path:"purchase_orders/view/:po_id/:material_id/:distribution_id",component:b}];class g{}g.\u0275fac=function(e){return new(e||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[c.Bz.forChild(ut),c.Bz]});var dt=a(1334),ct=a(6119),_t=a(4466);class h{}h.\u0275fac=function(e){return new(e||h)},h.\u0275mod=t.oAB({type:h}),h.\u0275inj=t.cJS({imports:[u.ez,g,dt.QX,_t.m,p.hJ1,ct.A0]})}}]);