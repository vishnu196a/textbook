"use strict";(self.webpackChunkdms=self.webpackChunkdms||[]).push([[621],{1621:(vt,x,i)=>{i.r(x),i.d(x,{UsersModule:()=>g});var c=i(6895),m=i(2545),q=i(2149),I=i(1086);const L=r=>r.userState;var v=i(727),t=i(1571),Z=i(529),y=i(2340);class d{constructor(n){this.httpClient=n,this.apiUrl=y.N.apiUrl}getAllUsers(n){let e=new Z.LE;return e=e.append("page",n),this.httpClient.get(`${this.apiUrl}/v1/users`,{params:e})}getUserDetails(n){return this.httpClient.get(`${this.apiUrl}/v1/users/${n}`)}updateUser(n,e){return this.httpClient.put(`${this.apiUrl}/v1/users/${e}`,n)}getBranchNames(){return this.httpClient.get(`${this.apiUrl}/v1/branches/ids_and_names`)}deleteUser(n){return this.httpClient.delete(`${this.apiUrl}/v1/users/${n}`)}addUser(n){return this.httpClient.post(`${this.apiUrl}/v1/users`,n)}}d.\u0275fac=function(n){return new(n||d)(t.LFG(Z.eN))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"});var F=i(1831),J=i(9886),U=i(7185),C=i(1334),Y=i(3556),b=i(3224);function w(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"tr",14)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"div",15)(13,"div",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.onEdit(a.id))}),t.O4$(),t._UZ(14,"svg",17),t.qZA(),t.kcU(),t.TgZ(15,"div",18),t.NdJ("click",function(){const a=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.onDelete(a))}),t.O4$(),t._UZ(16,"svg",19),t.qZA()()()()}if(2&r){const e=n.$implicit,o=n.index,l=t.oxw(2);t.xp6(2),t.Oqu(o+l.serialNo),t.xp6(2),t.AsE(" ",e.first_name," ",e.last_name?e.last_name:""," "),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Oqu(e.role),t.xp6(2),t.Oqu(e.branch_name)}}function O(r,n){if(1&r&&(t.TgZ(0,"div",7)(1,"table",8)(2,"thead",9)(3,"tr")(4,"th",10),t._uU(5," S No "),t._UZ(6,"i",11),t.qZA(),t.TgZ(7,"th",10),t._uU(8," Name "),t._UZ(9,"i",11),t.qZA(),t.TgZ(10,"th",10),t._uU(11," Email"),t._UZ(12,"i",11),t.qZA(),t.TgZ(13,"th",10),t._uU(14," Role"),t._UZ(15,"i",11),t.qZA(),t.TgZ(16,"th",10),t._uU(17," Branch Name"),t._UZ(18,"i",11),t.qZA(),t.TgZ(19,"th",12),t._uU(20,"Actions"),t.qZA()()(),t.TgZ(21,"tbody"),t.YNc(22,w,17,6,"tr",13),t.qZA()()()),2&r){const e=t.oxw();t.xp6(22),t.Q6J("ngForOf",e.users)}}function Q(r,n){1&r&&t._UZ(0,"div",20)}function E(r,n){1&r&&(t.TgZ(0,"h5",21),t._uU(1," No list found "),t.qZA())}function k(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"div",22)(1,"app-pagination",23),t.NdJ("pageChange",function(l){t.CHM(e);const a=t.oxw();return t.KtG(a.onPageChange(l))}),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("pagination",e.pagination)}}class p{constructor(n,e,o,l,a){this.router=n,this.userService=e,this.store=o,this.modalService=l,this.toasterService=a,this.isLoading=!1,this.users=[],this.subscriptions=new v.w0;const u=this.store.select(L).subscribe(_t=>{this.pagination=_t.pagination});this.subscriptions.add(u)}ngOnInit(){this.getAllUsers(this.pagination.current_page)}ngOnDestroy(){this.subscriptions.unsubscribe()}getAllUsers(n){this.isLoading=!0;const e=this.userService.getAllUsers(n).subscribe(o=>{this.isLoading=!1,this.users=o.users,this.store.dispatch((0,q.z)({pagination:o.pagination})),this.serialNo=this.pagination.start_at},o=>{this.toasterService.error(o.errors[0]),this.isLoading=!1});this.subscriptions.add(e)}onEdit(n){this.router.navigate(["users","edit",n])}onPageChange(n){this.getAllUsers(n)}onDelete(n){this.modalService.show(I.v,{initialState:{text:`Do you really want to remove user ${n.first_name} ${n.last_name?n.last_name:""}`}}).content?.confirm.subscribe({next:()=>{this.userService.deleteUser(n.id).subscribe({next:()=>{this.onPageChange(1),this.toasterService.success("User deleted successfully")},error:()=>{this.toasterService.error("Oops! Something went wrong")}})}})}onAddUser(){this.router.navigate(["users/add"])}}p.\u0275fac=function(n){return new(n||p)(t.Y36(m.F0),t.Y36(d),t.Y36(F.yh),t.Y36(J.tT),t.Y36(U._W))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-users-list"]],decls:10,vars:4,consts:[[1,"mb-4","d-flex","justify-content-between"],["cButton","","variant","outline","color","info","title","Click to add user",3,"click"],["class","table-responsive",4,"ngIf"],[1,"d-flex","justify-content-center","mt-5"],["class","spinner-border","role","status",4,"ngIf"],["class","text-center mt-5",4,"ngIf"],["class","d-flex",4,"ngIf"],[1,"table-responsive"],[1,"table","table-hover"],[1,"bg-secondary"],["scope","col",1,"curser-pointer"],[1,"text-info","bi"],["scope","col"],["class","bg-white",4,"ngFor","ngForOf"],[1,"bg-white"],[1,"d-flex","gap-3"],["title","Edit",1,"bg-edit","opacity-75","rounded-circle","px-2","py-1","text-white","fw-bolder","curser-pointer",3,"click"],["cIcon","","name","cilPencil","size","md"],["title","Delete",1,"bg-delete","opacity-75","rounded-circle","px-2","py-1","text-white","fw-bolder","curser-pointer",3,"click"],["cIcon","","name","cilTrash","size","md"],["role","status",1,"spinner-border"],[1,"text-center","mt-5"],[1,"d-flex"],[1,"mx-auto","my-3",3,"pagination","pageChange"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2,"Users"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return e.onAddUser()}),t._uU(4," Add User "),t.qZA()(),t.YNc(5,O,23,1,"div",2),t.TgZ(6,"div",3),t.YNc(7,Q,1,0,"div",4),t.YNc(8,E,2,0,"h5",5),t.qZA(),t.YNc(9,k,2,1,"div",6)),2&n&&(t.xp6(5),t.Q6J("ngIf",!e.isLoading&&(null==e.users?null:e.users.length)),t.xp6(2),t.Q6J("ngIf",e.isLoading),t.xp6(1),t.Q6J("ngIf",!(e.isLoading||null!=e.users&&e.users.length)),t.xp6(1),t.Q6J("ngIf",null==e.users?null:e.users.length))},dependencies:[c.sg,c.O5,C.ar,Y.Q,b.Hq3],styles:[".search[_ngcontent-%COMP%]{border-right:0px}.search-button[_ngcontent-%COMP%]{min-width:112px}.input-search[_ngcontent-%COMP%]{max-width:847px}.select-search-type[_ngcontent-%COMP%]{min-width:120px}.btn-view[_ngcontent-%COMP%]{background:#89f3b3}.btn-view[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#078439}.bg-edit[_ngcontent-%COMP%]{background:#bcbaf7;transition:all .2s ease-in-out}.bg-edit[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#230b34}.bg-edit[_ngcontent-%COMP%]:hover{background-color:#1e7bc6;cursor:pointer}.bg-edit[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{color:#fff}.bg-delete[_ngcontent-%COMP%]{background:#f795a0;transition:all .2s ease-in-out}.bg-delete[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#830000}.bg-delete[_ngcontent-%COMP%]:hover{background-color:red;cursor:pointer}.bg-delete[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{color:#fff}"]});var s=i(433),N=i(8613),S=i(9435),T=i(7665);function M(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"app-loading-button",16),t.NdJ("buttonClick",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.onFormUpdate())}),t.qZA()}if(2&r){const e=t.oxw();t.Q6J("disabled",e.editUserForm.invalid||e.editUserForm.pristine)("buttonText","Update")("title","Click to update user details")("isLoading",e.isLoading)("loadingText","Updating ...")("buttonIconClass","fas fa-check")}}function P(r,n){1&r&&(t.TgZ(0,"div",17),t._UZ(1,"i",18),t.qZA())}function j(r,n){1&r&&(t.TgZ(0,"div",19)(1,"h5"),t._UZ(2,"i",20),t._uU(3," Oops! No user found. "),t.qZA()())}function B(r,n){if(1&r&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&r){const e=n.$implicit;t.xp6(1),t.hij(" ",e," ")}}function z(r,n){if(1&r&&(t.TgZ(0,"div",21)(1,"p"),t._uU(2,"Please fix the following"),t.qZA(),t.TgZ(3,"ul"),t.YNc(4,B,2,1,"li",22),t.qZA()()),2&r){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.validationErrors)}}function $(r,n){1&r&&(t.TgZ(0,"small",26),t._uU(1,"First name is required"),t.qZA())}function D(r,n){if(1&r&&(t.TgZ(0,"small",26),t._uU(1),t.qZA()),2&r){const e=t.oxw(3);t.xp6(1),t.hij("Minimum length required is ",null==e.formControls.firstName.errors?null:e.formControls.firstName.errors.minlength.requiredLength,"")}}function G(r,n){if(1&r&&(t.TgZ(0,"small",26),t._uU(1),t.qZA()),2&r){const e=t.oxw(3);t.xp6(1),t.hij("Maximum length is ",null==e.formControls.firstName.errors?null:e.formControls.firstName.errors.maxlength.requiredLength,"")}}function H(r,n){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,$,2,0,"small",38),t.YNc(2,D,2,1,"small",38),t.YNc(3,G,2,1,"small",38),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.formControls.firstName),t.xp6(1),t.Q6J("ngIf",null==e.formControls.firstName.errors?null:e.formControls.firstName.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==e.formControls.firstName.errors?null:e.formControls.firstName.errors.maxlength)}}function X(r,n){1&r&&(t.TgZ(0,"small",26),t._uU(1,"Last Name is required"),t.qZA())}function K(r,n){if(1&r&&(t.TgZ(0,"small",26),t._uU(1),t.qZA()),2&r){const e=t.oxw(3);t.xp6(1),t.hij("Minimum length required is ",null==e.formControls.lastName.errors?null:e.formControls.lastName.errors.minlength.requiredLength,"")}}function V(r,n){if(1&r&&(t.TgZ(0,"small",26),t._uU(1),t.qZA()),2&r){const e=t.oxw(3);t.xp6(1),t.hij("Maximum length is ",null==e.formControls.lastName.errors?null:e.formControls.lastName.errors.maxlength.requiredLength,"")}}function R(r,n){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,X,2,0,"small",38),t.YNc(2,K,2,1,"small",38),t.YNc(3,V,2,1,"small",38),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.formControls.lastName.errors?null:e.formControls.lastName.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.formControls.lastName.errors?null:e.formControls.lastName.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==e.formControls.lastName.errors?null:e.formControls.lastName.errors.maxlength)}}function W(r,n){if(1&r&&(t.TgZ(0,"div",23)(1,"div",24)(2,"label",25),t._uU(3," First Name "),t.TgZ(4,"span",26),t._uU(5,"*"),t.qZA()(),t._UZ(6,"input",27),t.YNc(7,H,4,3,"div",28),t.qZA(),t.TgZ(8,"div",29)(9,"label",30),t._uU(10," Last Name "),t.TgZ(11,"span",26),t._uU(12,"*"),t.qZA()(),t._UZ(13,"input",31),t.YNc(14,R,4,3,"div",28),t.qZA(),t.TgZ(15,"div",32)(16,"label",33),t._uU(17,"Email Address "),t.TgZ(18,"span",26),t._uU(19,"*"),t.qZA()(),t._UZ(20,"input",34),t.qZA(),t.TgZ(21,"div",32)(22,"label",35),t._uU(23,"Branch Name "),t.TgZ(24,"span",26),t._uU(25,"*"),t.qZA()(),t._UZ(26,"input",36),t.qZA(),t._UZ(27,"div",37),t.qZA()),2&r){const e=t.oxw();t.xp6(7),t.Q6J("ngIf",e.formControls.firstName.touched&&e.formControls.firstName.invalid),t.xp6(7),t.Q6J("ngIf",e.formControls.lastName.touched&&e.formControls.lastName.invalid)}}class h{constructor(n,e,o,l,a,u){this.formBuilder=n,this.route=e,this.router=o,this.toasterService=l,this.userService=a,this.formState=u,this.initialLoading=!0,this.subscriptions=new v.w0}ngOnInit(){this.initializeForm(),this.userId=this.route.snapshot.params.id,this.getUserAndInitializeForm()}ngOnDestroy(){this.subscriptions.unsubscribe()}initializeForm(){this.editUserForm=this.formBuilder.group({firstName:[null,[s.kI.required,s.kI.minLength(1),s.kI.maxLength(20)]],lastName:[null,[s.kI.required,s.kI.minLength(1),s.kI.maxLength(20)]],email:[null,[s.kI.required,s.kI.pattern(N.v.email)]],branch:[null,[s.kI.required]]})}getUserAndInitializeForm(){const n=this.userService.getUserDetails(this.userId).subscribe(e=>{this.editUserForm.patchValue({firstName:e.first_name,lastName:e.last_name,email:e.email,branch:e.branch_name}),this.hasUser=!0,this.initialLoading=!1,this.formState.isFormPristine(this.editUserForm)},e=>{this.toasterService.error(e.errors[0]),this.hasUser=!1,this.initialLoading=!1});this.subscriptions.add(n)}get formControls(){return this.editUserForm.controls}onFormUpdate(){if(this.editUserForm.valid){this.isLoading=!0;const e=this.userService.updateUser({first_name:this.editUserForm.value.firstName,last_name:this.editUserForm.value.lastName},this.userId).subscribe(()=>{this.toasterService.success("User has been updated successfully"),this.router.navigate(["/users"])},o=>{this.toasterService.error(o.errors[0])});this.subscriptions.add(e)}}}h.\u0275fac=function(n){return new(n||h)(t.Y36(s.qu),t.Y36(m.gz),t.Y36(m.F0),t.Y36(U._W),t.Y36(d),t.Y36(S.x))},h.\u0275cmp=t.Xpm({type:h,selectors:[["ng-component"]],decls:20,vars:7,consts:[[1,"d-flex","justify-content-center"],["autocomplete","off",1,"mt-3",3,"formGroup"],[1,"card"],[1,"card-header"],[1,"d-flex","justify-content-between","align-items-center"],["title","Back","routerLink","/users",1,"btn","btn-primary","d-flex","align-items-center",3,"disabled"],[1,"min-width-18px"],["aria-hidden","true",1,"fa","fa-chevron-left"],[1,"text","ml-1","ml-sm-o","d-none","d-sm-block"],[1,"text-center","m-0"],[3,"disabled","buttonText","title","isLoading","loadingText","buttonIconClass","buttonClick",4,"ngIf"],[1,"card-body"],["class","col text-center text-primary mt-5 pt-5",4,"ngIf"],["class","d-flex align-items-center justify-content-center mt-4 h-100 alert alert-danger",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],["class","mt-3 row",4,"ngIf"],[3,"disabled","buttonText","title","isLoading","loadingText","buttonIconClass","buttonClick"],[1,"col","text-center","text-primary","mt-5","pt-5"],["aria-hidden","true",1,"fa","fa-spinner","fa-pulse","fa-3x"],[1,"d-flex","align-items-center","justify-content-center","mt-4","h-100","alert","alert-danger"],["aria-hidden","true",1,"fa","fa-meh"],[1,"alert","alert-warning"],[4,"ngFor","ngForOf"],[1,"mt-3","row"],[1,"form-group","col-12","col-md-6"],["for","firstName"],[1,"text-danger"],["type","text","id","firstName","formControlName","firstName","placeholder","Enter First Name","appAlphaOnly","","onkeypress","return /[a-zA-Z]/i.test(event.key)",1,"form-control"],[4,"ngIf"],[1,"form-group","col-12","col-md-6","mt-2","mt-md-0"],["for","lastName"],["type","text","id","lastName","formControlName","lastName","placeholder","Enter Last Name","appAlphaOnly","","onkeypress","return /[a-zA-Z]/i.test(event.key)",1,"form-control"],[1,"form-group","col-12","col-md-6","mt-2","mt-md-4","opacity-75"],["for","email"],["type","email","id","email","readonly","","formControlName","email","name","email",1,"form-control"],["for","vendor"],["type","text","id","branch","readonly","","formControlName","branch",1,"form-control"],[1,"text-center","mb-4"],["class","text-danger",4,"ngIf"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"button",5)(7,"span",6),t._UZ(8,"i",7),t.qZA(),t.TgZ(9,"span",8),t._uU(10,"Back"),t.qZA()()(),t.TgZ(11,"h2",9),t._uU(12,"Update User"),t.qZA(),t.TgZ(13,"div"),t.YNc(14,M,1,6,"app-loading-button",10),t.qZA()()(),t.TgZ(15,"div",11),t.YNc(16,P,2,0,"div",12),t.YNc(17,j,4,0,"div",13),t.YNc(18,z,5,1,"div",14),t.YNc(19,W,28,2,"div",15),t.qZA()()()()),2&n&&(t.xp6(1),t.Q6J("formGroup",e.editUserForm),t.xp6(5),t.Q6J("disabled",e.isLoading),t.xp6(8),t.Q6J("ngIf",e.hasUser),t.xp6(2),t.Q6J("ngIf",e.initialLoading),t.xp6(1),t.Q6J("ngIf",!e.hasUser&&!e.initialLoading),t.xp6(1),t.Q6J("ngIf",e.hasValidationError),t.xp6(1),t.Q6J("ngIf",e.hasUser&&!e.initialLoading))},dependencies:[c.sg,c.O5,m.rH,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,T.v],encapsulation:2});var A=i(6119);function tt(r,n){if(1&r&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&r){const e=n.$implicit;t.xp6(1),t.hij(" ",e," ")}}function et(r,n){if(1&r&&(t.TgZ(0,"div",27)(1,"p"),t._uU(2,"Please fix the following"),t.qZA(),t.TgZ(3,"ul"),t.YNc(4,tt,2,1,"li",28),t.qZA()()),2&r){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.validationErrors)}}function rt(r,n){1&r&&(t.TgZ(0,"small",16),t._uU(1,"First name is required"),t.qZA())}function nt(r,n){if(1&r&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.hij("Minimum length required is ",null==e.formControls.firstName.errors?null:e.formControls.firstName.errors.minlength.requiredLength,"")}}function st(r,n){if(1&r&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.hij("Maximum length is ",null==e.formControls.firstName.errors?null:e.formControls.firstName.errors.maxlength.requiredLength,"")}}function ot(r,n){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,rt,2,0,"small",29),t.YNc(2,nt,2,1,"small",29),t.YNc(3,st,2,1,"small",29),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.formControls.firstName.errors?null:e.formControls.firstName.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.formControls.firstName.errors?null:e.formControls.firstName.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==e.formControls.firstName.errors?null:e.formControls.firstName.errors.maxlength)}}function it(r,n){1&r&&(t.TgZ(0,"small",16),t._uU(1,"Last name is required"),t.qZA())}function lt(r,n){if(1&r&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.hij("Minimum length required is ",null==e.formControls.lastName.errors?null:e.formControls.lastName.errors.minlength.requiredLength,"")}}function at(r,n){if(1&r&&(t.TgZ(0,"small",16),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.hij("Maximum length is ",null==e.formControls.lastName.errors?null:e.formControls.lastName.errors.maxlength.requiredLength,"")}}function mt(r,n){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,it,2,0,"small",29),t.YNc(2,lt,2,1,"small",29),t.YNc(3,at,2,1,"small",29),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.formControls.lastName.errors?null:e.formControls.lastName.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.formControls.lastName.errors?null:e.formControls.lastName.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==e.formControls.lastName.errors?null:e.formControls.lastName.errors.maxlength)}}function dt(r,n){1&r&&(t.TgZ(0,"small",16),t._uU(1,"Email is required"),t.qZA())}function ct(r,n){1&r&&(t.TgZ(0,"small",16),t._uU(1,"Enter a valid email"),t.qZA())}function ut(r,n){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,dt,2,0,"small",29),t.YNc(2,ct,2,0,"small",29),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.formControls.email.errors?null:e.formControls.email.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.formControls.email.errors?null:e.formControls.email.errors.pattern)}}function ft(r,n){1&r&&(t.TgZ(0,"small",16),t._uU(1,"Branch name is required"),t.qZA())}function gt(r,n){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,ft,2,0,"small",29),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.formControls.branch.errors?null:e.formControls.branch.errors.required)}}class _{constructor(n,e,o,l){this.formBuilder=n,this.router=e,this.toasterService=o,this.userService=l,this.branchesList=[],this.subscriptions=new v.w0}ngOnInit(){this.initializeForm(),this.getBranchNames()}ngOnDestroy(){this.subscriptions.unsubscribe()}initializeForm(){this.addUserForm=this.formBuilder.group({firstName:[null,[s.kI.required,s.kI.minLength(1),s.kI.maxLength(20)]],lastName:[null,[s.kI.required,s.kI.minLength(1),s.kI.maxLength(20)]],email:[null,[s.kI.required,s.kI.pattern(N.v.email)]],branch:[null,[s.kI.required]]})}get formControls(){return this.addUserForm.controls}getBranchNames(){const n=this.userService.getBranchNames().subscribe(e=>{this.branchesList=e},e=>{this.toasterService.error(e.errors[0])});this.subscriptions.add(n)}onFormSubmit(){if(this.addUserForm.valid){this.isLoading=!0;const e=this.userService.addUser({first_name:this.addUserForm.value.firstName,last_name:this.addUserForm.value.lastName,email:this.addUserForm.value.email,branch_id:this.addUserForm.value.branch}).subscribe(()=>{this.toasterService.success("User added successfully"),this.router.navigate(["/users"])},o=>{this.toasterService.error(o.errors[0]),this.isLoading=!1});this.subscriptions.add(e)}}}_.\u0275fac=function(n){return new(n||_)(t.Y36(s.qu),t.Y36(m.F0),t.Y36(U._W),t.Y36(d))},_.\u0275cmp=t.Xpm({type:_,selectors:[["ng-component"]],decls:46,vars:16,consts:[[1,"d-flex","justify-content-center"],["autocomplete","off",1,"mt-3",3,"formGroup","submit"],[1,"card"],[1,"card-header"],[1,"d-flex","justify-content-between","align-items-center"],["type","button","title","Back","routerLink","../",1,"btn","btn-primary","d-flex","align-items-center",3,"disabled"],[1,"min-width-18px"],["aria-hidden","true",1,"fa","fa-chevron-left"],[1,"text","ml-1","ml-sm-o","d-none","d-sm-block"],[1,"text-center","m-0"],[3,"disabled","buttonText","title","isLoading","loadingText","buttonIconClass"],[1,"card-body"],["class","alert alert-warning",4,"ngIf"],[1,"row"],[1,"form-group","col-12","col-md-6"],["for","firstName"],[1,"text-danger"],["type","text","id","firstName","formControlName","firstName","maxlength","100","placeholder","Enter First Name","onkeypress","return /[a-zA-Z]/i.test(event.key)",1,"form-control"],[4,"ngIf"],[1,"form-group","col-12","col-md-6","mt-2","mt-md-0"],["for","lastName"],["type","text","id","lastName","formControlName","lastName","maxlength","100","placeholder","Enter Last Name","onkeypress","return /[a-zA-Z]/i.test(event.key)",1,"form-control"],[1,"form-group","col-12","col-md-6","mt-2","mt-md-4"],["for","email"],["type","email","id","email","placeholder","Enter Email","formControlName","email",1,"form-control"],["for","branch"],["bindValue","id","bindLabel","name","placeholder","Select Branch","formControlName","branch","notFoundText","No branches found",3,"items","clearable","searchable"],[1,"alert","alert-warning"],[4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("submit",function(){return e.onFormSubmit()}),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"button",5)(7,"span",6),t._UZ(8,"i",7),t.qZA(),t.TgZ(9,"span",8),t._uU(10,"Back"),t.qZA()()(),t.TgZ(11,"h2",9),t._uU(12,"Add User"),t.qZA(),t.TgZ(13,"div"),t._UZ(14,"app-loading-button",10),t.qZA()()(),t.TgZ(15,"div",11),t.YNc(16,et,5,1,"div",12),t.TgZ(17,"div",13)(18,"div",14)(19,"label",15),t._uU(20," First Name "),t.TgZ(21,"span",16),t._uU(22,"*"),t.qZA()(),t._UZ(23,"input",17),t.YNc(24,ot,4,3,"div",18),t.qZA(),t.TgZ(25,"div",19)(26,"label",20),t._uU(27," Last Name "),t.TgZ(28,"span",16),t._uU(29,"*"),t.qZA()(),t._UZ(30,"input",21),t.YNc(31,mt,4,3,"div",18),t.qZA(),t.TgZ(32,"div",22)(33,"label",23),t._uU(34,"Email Address "),t.TgZ(35,"span",16),t._uU(36,"*"),t.qZA()(),t._UZ(37,"input",24),t.YNc(38,ut,3,2,"div",18),t.qZA(),t.TgZ(39,"div",22)(40,"label",25),t._uU(41,"Branch Name"),t.TgZ(42,"span",16),t._uU(43,"*"),t.qZA()(),t._UZ(44,"ng-select",26),t.YNc(45,gt,2,1,"div",18),t.qZA()()()()()()),2&n&&(t.xp6(1),t.Q6J("formGroup",e.addUserForm),t.xp6(5),t.Q6J("disabled",e.isLoading),t.xp6(8),t.Q6J("disabled",e.addUserForm.invalid)("buttonText","Add User")("title","Click to add User")("isLoading",e.isLoading)("loadingText","Adding User...")("buttonIconClass","fas fa-check"),t.xp6(2),t.Q6J("ngIf",e.hasValidationError),t.xp6(8),t.Q6J("ngIf",e.formControls.firstName.touched&&e.formControls.firstName.invalid),t.xp6(7),t.Q6J("ngIf",e.formControls.lastName.touched&&e.formControls.lastName.invalid),t.xp6(7),t.Q6J("ngIf",e.formControls.email.touched&&e.formControls.email.invalid),t.xp6(6),t.Q6J("items",e.branchesList)("clearable",!1)("searchable",!0),t.xp6(1),t.Q6J("ngIf",e.formControls.branch.touched&&e.formControls.branch.invalid))},dependencies:[c.sg,c.O5,m.rH,s._Y,s.Fj,s.JJ,s.JL,s.nD,s.sg,s.u,T.v,A.w9],encapsulation:2});const pt=[{path:"users",component:p},{path:"users/edit/:id",component:h},{path:"users/add",component:_}];class f{}f.\u0275fac=function(n){return new(n||f)},f.\u0275mod=t.oAB({type:f}),f.\u0275inj=t.cJS({imports:[m.Bz.forChild(pt),m.Bz]});var ht=i(4466);class g{}g.\u0275fac=function(n){return new(n||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[c.ez,f,C.QX,ht.m,s.UX,s.u5,A.A0,b.hJ1]})}}]);